/* esm.sh - esbuild bundle(@automerge/automerge-repo-network-websocket@2.0.0-alpha.11) es2022 production */
(()=>{var a=typeof Reflect=="object"?Reflect:null,g=a&&typeof a.apply=="function"?a.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},p;a&&typeof a.ownKeys=="function"?p=a.ownKeys:Object.getOwnPropertySymbols?p=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:p=function(e){return Object.getOwnPropertyNames(e)};function D(n){console&&console.warn&&console.warn(n)}var w=Number.isNaN||function(e){return e!==e};function s(){L.call(this)}s.EventEmitter=s;s.prototype._events=void 0;s.prototype._eventsCount=0;s.prototype._maxListeners=void 0;var y=10;function d(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(n){if(typeof n!="number"||n<0||w(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");y=n}});function L(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}s.init=L;s.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||w(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function b(n){return n._maxListeners===void 0?s.defaultMaxListeners:n._maxListeners}s.prototype.getMaxListeners=function(){return b(this)};s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",u=this._events;if(u!==void 0)i=i&&u.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var c=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw c.context=o,c}var l=u[e];if(l===void 0)return!1;if(typeof l=="function")g(l,this,t);else for(var m=l.length,M=x(l,m),r=0;r<m;++r)g(M[r],this,t);return!0};function _(n,e,t,r){var i,u,o;if(d(t),u=n._events,u===void 0?(u=n._events=Object.create(null),n._eventsCount=0):(u.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),u=n._events),o=u[e]),o===void 0)o=u[e]=t,++n._eventsCount;else if(typeof o=="function"?o=u[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=b(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=n,c.type=e,c.count=o.length,D(c)}return n}s.prototype.addListener=function(e,t){return _(this,e,t,!1)};s.prototype.on=s.prototype.addListener;s.prototype.prependListener=function(e,t){return _(this,e,t,!0)};function R(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=R.bind(r);return i.listener=t,r.wrapFn=i,i}s.prototype.once=function(e,t){return d(t),this.on(e,E(this,e,t)),this};s.prototype.prependOnceListener=function(e,t){return d(t),this.prependListener(e,E(this,e,t)),this};s.prototype.removeListener=function(e,t){var r,i,u,o,c;if(d(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(u=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){c=r[o].listener,u=o;break}if(u<0)return this;u===0?r.shift():N(r,u),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};s.prototype.off=s.prototype.removeListener;s.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var u=Object.keys(r),o;for(i=0;i<u.length;++i)o=u[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function O(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?P(i):x(i,i.length)}s.prototype.listeners=function(e){return O(this,e,!0)};s.prototype.rawListeners=function(e){return O(this,e,!1)};function C(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):s.prototype.listenerCount.call(n,e)}s.listenerCount=C;s.prototype.listenerCount=function(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0};s.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]};function x(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function N(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function P(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function v(n){let e=performance.now(),t=Math.floor(e/1e3),r=Math.floor(e*1e6-t*1e9);if(!n)return[t,r];let[i,u]=n;return[t-i,r-u]}v.bigint=function(){let[n,e]=v();return BigInt(n)*1000000000n+BigInt(e)};var h=class extends s{title="browser";browser=!0;env={};argv=[];pid=0;arch="unknown";platform="browser";version="";versions={};emitWarning=()=>{throw new Error("process.emitWarning is not supported")};binding=()=>{throw new Error("process.binding is not supported")};cwd=()=>{throw new Error("process.cwd is not supported")};chdir=e=>{throw new Error("process.chdir is not supported")};umask=()=>18;nextTick=(e,...t)=>queueMicrotask(()=>e(...t));hrtime=v;constructor(){super()}},f=new h;if(typeof Deno<"u"){f.name="deno",f.browser=!1,f.pid=Deno.pid,f.cwd=()=>Deno.cwd(),f.chdir=e=>Deno.chdir(e),f.arch=Deno.build.arch,f.platform=Deno.build.os,f.version="v18.12.1",f.versions={node:"18.12.1",uv:"1.43.0",zlib:"1.2.11",brotli:"1.0.9",ares:"1.18.1",modules:"108",nghttp2:"1.47.0",napi:"8",llhttp:"6.0.10",openssl:"3.0.7+quic",cldr:"41.0",icu:"71.1",tz:"2022b",unicode:"14.0",ngtcp2:"0.8.1",nghttp3:"0.7.0",...Deno.version},f.env=new Proxy({},{get(e,t){return Deno.env.get(String(t))},ownKeys:()=>Reflect.ownKeys(Deno.env.toObject()),getOwnPropertyDescriptor:(e,t)=>{let r=Deno.env.toObject();if(t in Deno.env.toObject()){let i={enumerable:!0,configurable:!0};return typeof t=="string"&&(i.value=r[t]),i}},set(e,t,r){return Deno.env.set(String(t),String(r)),r}});let n=["","",...Deno.args];Object.defineProperty(n,"0",{get:Deno.execPath}),Object.defineProperty(n,"1",{get:()=>Deno.mainModule.startsWith("file:")?new URL(Deno.mainModule).pathname:join(Deno.cwd(),"$deno$node.js")}),f.argv=n}else{let n="/";f.cwd=()=>n,f.chdir=e=>n=e}var j=f;globalThis.__Process$=j;})();
(()=>{var Lt=Object.create,q=Object.defineProperty,_t=Object.getOwnPropertyDescriptor,xt=Object.getOwnPropertyNames,Ct=Object.getPrototypeOf,Mt=Object.prototype.hasOwnProperty,W=(p,a)=>()=>(a||p((a={exports:{}}).exports,a),a.exports),Pt=(p,a)=>{for(var s in a)q(p,s,{get:a[s],enumerable:!0})},V=(p,a,s,S)=>{if(a&&typeof a=="object"||typeof a=="function")for(let b of xt(a))!Mt.call(p,b)&&b!==s&&q(p,b,{get:()=>a[b],enumerable:!(S=_t(a,b))||S.enumerable});return p},$t=(p,a,s)=>(V(p,a,"default"),s&&V(s,a,"default")),st=(p,a,s)=>(s=p!=null?Lt(Ct(p)):{},V(a||!p||!p.__esModule?q(s,"default",{value:p,enumerable:!0}):s,p)),Nt=W(p=>{"use strict";p.byteLength=T,p.toByteArray=$,p.fromByteArray=P;var a=[],s=[],S=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(B=0,c=b.length;B<c;++B)a[B]=b[B],s[b.charCodeAt(B)]=B;var B,c;s[45]=62,s[95]=63;function f(h){var l=h.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=h.indexOf("=");w===-1&&(w=l);var A=w===l?0:4-w%4;return[w,A]}function T(h){var l=f(h),w=l[0],A=l[1];return(w+A)*3/4-A}function L(h,l,w){return(l+w)*3/4-w}function $(h){var l,w=f(h),A=w[0],_=w[1],E=new S(L(h,A,_)),x=0,M=_>0?A-4:A,O;for(O=0;O<M;O+=4)l=s[h.charCodeAt(O)]<<18|s[h.charCodeAt(O+1)]<<12|s[h.charCodeAt(O+2)]<<6|s[h.charCodeAt(O+3)],E[x++]=l>>16&255,E[x++]=l>>8&255,E[x++]=l&255;return _===2&&(l=s[h.charCodeAt(O)]<<2|s[h.charCodeAt(O+1)]>>4,E[x++]=l&255),_===1&&(l=s[h.charCodeAt(O)]<<10|s[h.charCodeAt(O+1)]<<4|s[h.charCodeAt(O+2)]>>2,E[x++]=l>>8&255,E[x++]=l&255),E}function m(h){return a[h>>18&63]+a[h>>12&63]+a[h>>6&63]+a[h&63]}function U(h,l,w){for(var A,_=[],E=l;E<w;E+=3)A=(h[E]<<16&16711680)+(h[E+1]<<8&65280)+(h[E+2]&255),_.push(m(A));return _.join("")}function P(h){for(var l,w=h.length,A=w%3,_=[],E=16383,x=0,M=w-A;x<M;x+=E)_.push(U(h,x,x+E>M?M:x+E));return A===1?(l=h[w-1],_.push(a[l>>2]+a[l<<4&63]+"==")):A===2&&(l=(h[w-2]<<8)+h[w-1],_.push(a[l>>10]+a[l>>4&63]+a[l<<2&63]+"=")),_.join("")}}),jt=W(p=>{p.read=function(a,s,S,b,B){var c,f,T=B*8-b-1,L=(1<<T)-1,$=L>>1,m=-7,U=S?B-1:0,P=S?-1:1,h=a[s+U];for(U+=P,c=h&(1<<-m)-1,h>>=-m,m+=T;m>0;c=c*256+a[s+U],U+=P,m-=8);for(f=c&(1<<-m)-1,c>>=-m,m+=b;m>0;f=f*256+a[s+U],U+=P,m-=8);if(c===0)c=1-$;else{if(c===L)return f?NaN:(h?-1:1)*(1/0);f=f+Math.pow(2,b),c=c-$}return(h?-1:1)*f*Math.pow(2,c-b)},p.write=function(a,s,S,b,B,c){var f,T,L,$=c*8-B-1,m=(1<<$)-1,U=m>>1,P=B===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=b?0:c-1,l=b?1:-1,w=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(T=isNaN(s)?1:0,f=m):(f=Math.floor(Math.log(s)/Math.LN2),s*(L=Math.pow(2,-f))<1&&(f--,L*=2),f+U>=1?s+=P/L:s+=P*Math.pow(2,1-U),s*L>=2&&(f++,L/=2),f+U>=m?(T=0,f=m):f+U>=1?(T=(s*L-1)*Math.pow(2,B),f=f+U):(T=s*Math.pow(2,U-1)*Math.pow(2,B),f=0));B>=8;a[S+h]=T&255,h+=l,T/=256,B-=8);for(f=f<<B|T,$+=B;$>0;a[S+h]=f&255,h+=l,f/=256,$-=8);a[S+h-l]|=w*128}}),ht=W(p=>{"use strict";var a=Nt(),s=jt(),S=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;p.Buffer=f,p.SlowBuffer=_,p.INSPECT_MAX_BYTES=50;var b=2147483647;p.kMaxLength=b,f.TYPED_ARRAY_SUPPORT=B(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function B(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(t){if(t>b)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,f.prototype),e}function f(t,e,n){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(t)}return T(t,e,n)}f.poolSize=8192;function T(t,e,n){if(typeof t=="string")return U(t,e);if(ArrayBuffer.isView(t))return h(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(N(t,ArrayBuffer)||t&&N(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(N(t,SharedArrayBuffer)||t&&N(t.buffer,SharedArrayBuffer)))return l(t,e,n);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=t.valueOf&&t.valueOf();if(r!=null&&r!==t)return f.from(r,e,n);let o=w(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return f.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}f.from=function(t,e,n){return T(t,e,n)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function L(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function $(t,e,n){return L(t),t<=0?c(t):e!==void 0?typeof n=="string"?c(t).fill(e,n):c(t).fill(e):c(t)}f.alloc=function(t,e,n){return $(t,e,n)};function m(t){return L(t),c(t<0?0:A(t)|0)}f.allocUnsafe=function(t){return m(t)},f.allocUnsafeSlow=function(t){return m(t)};function U(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let n=E(t,e)|0,r=c(n),o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}function P(t){let e=t.length<0?0:A(t.length)|0,n=c(e);for(let r=0;r<e;r+=1)n[r]=t[r]&255;return n}function h(t){if(N(t,Uint8Array)){let e=new Uint8Array(t);return l(e.buffer,e.byteOffset,e.byteLength)}return P(t)}function l(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return e===void 0&&n===void 0?r=new Uint8Array(t):n===void 0?r=new Uint8Array(t,e):r=new Uint8Array(t,e,n),Object.setPrototypeOf(r,f.prototype),r}function w(t){if(f.isBuffer(t)){let e=A(t.length)|0,n=c(e);return n.length===0||t.copy(n,0,0,e),n}if(t.length!==void 0)return typeof t.length!="number"||X(t.length)?c(0):P(t);if(t.type==="Buffer"&&Array.isArray(t.data))return P(t.data)}function A(t){if(t>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return t|0}function _(t){return+t!=t&&(t=0),f.alloc(+t)}f.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==f.prototype},f.compare=function(t,e){if(N(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),N(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(t)||!f.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return f.alloc(0);let n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;let r=f.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){let i=t[n];if(N(i,Uint8Array))o+i.length>r.length?(f.isBuffer(i)||(i=f.from(i)),i.copy(r,o)):Uint8Array.prototype.set.call(r,i,o);else if(f.isBuffer(i))i.copy(r,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=i.length}return r};function E(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||N(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return it(t).length;default:if(o)return r?-1:G(t).length;e=(""+e).toLowerCase(),o=!0}}f.byteLength=E;function x(t,e,n){let r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Et(this,e,n);case"utf8":case"utf-8":return H(this,e,n);case"ascii":return Bt(this,e,n);case"latin1":case"binary":return mt(this,e,n);case"base64":return dt(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}f.prototype._isBuffer=!0;function M(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}f.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)M(this,e,e+1);return this},f.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)M(this,e,e+3),M(this,e+1,e+2);return this},f.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)M(this,e,e+7),M(this,e+1,e+6),M(this,e+2,e+5),M(this,e+3,e+4);return this},f.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?H(this,0,t):x.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:f.compare(this,t)===0},f.prototype.inspect=function(){let t="",e=p.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},S&&(f.prototype[S]=f.prototype.inspect),f.prototype.compare=function(t,e,n,r,o){if(N(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),o===void 0&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;let i=o-r,u=n-e,g=Math.min(i,u),R=this.slice(r,o),d=t.slice(e,n);for(let y=0;y<g;++y)if(R[y]!==d[y]){i=R[y],u=d[y];break}return i<u?-1:u<i?1:0};function O(t,e,n,r,o){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,X(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0)if(o)n=0;else return-1;if(typeof e=="string"&&(e=f.from(e,r)),f.isBuffer(e))return e.length===0?-1:Z(t,e,n,r,o);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Z(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Z(t,e,n,r,o){let i=1,u=t.length,g=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,u/=2,g/=2,n/=2}function R(y,v){return i===1?y[v]:y.readUInt16BE(v*i)}let d;if(o){let y=-1;for(d=n;d<u;d++)if(R(t,d)===R(e,y===-1?0:d-y)){if(y===-1&&(y=d),d-y+1===g)return y*i}else y!==-1&&(d-=d-y),y=-1}else for(n+g>u&&(n=u-g),d=n;d>=0;d--){let y=!0;for(let v=0;v<g;v++)if(R(t,d+v)!==R(e,v)){y=!1;break}if(y)return d}return-1}f.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},f.prototype.indexOf=function(t,e,n){return O(this,t,e,n,!0)},f.prototype.lastIndexOf=function(t,e,n){return O(this,t,e,n,!1)};function pt(t,e,n,r){n=Number(n)||0;let o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;let i=e.length;r>i/2&&(r=i/2);let u;for(u=0;u<r;++u){let g=parseInt(e.substr(u*2,2),16);if(X(g))return u;t[n+u]=g}return u}function ct(t,e,n,r){return Y(G(e,t.length-n),t,n,r)}function gt(t,e,n,r){return Y(Rt(e),t,n,r)}function yt(t,e,n,r){return Y(it(e),t,n,r)}function wt(t,e,n,r){return Y(Tt(e,t.length-n),t,n,r)}f.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return pt(this,t,e,n);case"utf8":case"utf-8":return ct(this,t,e,n);case"ascii":case"latin1":case"binary":return gt(this,t,e,n);case"base64":return yt(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wt(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function dt(t,e,n){return e===0&&n===t.length?a.fromByteArray(t):a.fromByteArray(t.slice(e,n))}function H(t,e,n){n=Math.min(t.length,n);let r=[],o=e;for(;o<n;){let i=t[o],u=null,g=i>239?4:i>223?3:i>191?2:1;if(o+g<=n){let R,d,y,v;switch(g){case 1:i<128&&(u=i);break;case 2:R=t[o+1],(R&192)===128&&(v=(i&31)<<6|R&63,v>127&&(u=v));break;case 3:R=t[o+1],d=t[o+2],(R&192)===128&&(d&192)===128&&(v=(i&15)<<12|(R&63)<<6|d&63,v>2047&&(v<55296||v>57343)&&(u=v));break;case 4:R=t[o+1],d=t[o+2],y=t[o+3],(R&192)===128&&(d&192)===128&&(y&192)===128&&(v=(i&15)<<18|(R&63)<<12|(d&63)<<6|y&63,v>65535&&v<1114112&&(u=v))}}u===null?(u=65533,g=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|u&1023),r.push(u),o+=g}return bt(r)}var K=4096;function bt(t){let e=t.length;if(e<=K)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=K));return n}function Bt(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]&127);return r}function mt(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function Et(t,e,n){let r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let i=e;i<n;++i)o+=Ot[t[i]];return o}function vt(t,e,n){let r=t.slice(e,n),o="";for(let i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+r[i+1]*256);return o}f.prototype.slice=function(t,e){let n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,f.prototype),r};function I(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||I(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},f.prototype.readUintBE=f.prototype.readUIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||I(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},f.prototype.readUint8=f.prototype.readUInt8=function(t,e){return t=t>>>0,e||I(t,1,this.length),this[t]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||I(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||I(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||I(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readBigUInt64LE=j(function(t){t=t>>>0,F(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);let r=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))}),f.prototype.readBigUInt64BE=j(function(t){t=t>>>0,F(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);let r=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(r)<<BigInt(32))+BigInt(o)}),f.prototype.readIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||I(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},f.prototype.readIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||I(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},f.prototype.readInt8=function(t,e){return t=t>>>0,e||I(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},f.prototype.readInt16LE=function(t,e){t=t>>>0,e||I(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n},f.prototype.readInt16BE=function(t,e){t=t>>>0,e||I(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n},f.prototype.readInt32LE=function(t,e){return t=t>>>0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return t=t>>>0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readBigInt64LE=j(function(t){t=t>>>0,F(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);let r=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),f.prototype.readBigInt64BE=j(function(t){t=t>>>0,F(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);let r=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}),f.prototype.readFloatLE=function(t,e){return t=t>>>0,e||I(t,4,this.length),s.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return t=t>>>0,e||I(t,4,this.length),s.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||I(t,8,this.length),s.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||I(t,8,this.length),s.read(this,t,!1,52,8)};function C(t,e,n,r,o,i){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e=e>>>0,n=n>>>0,!r){let u=Math.pow(2,8*n)-1;C(this,t,e,n,u,0)}let o=1,i=0;for(this[e]=t&255;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e=e>>>0,n=n>>>0,!r){let u=Math.pow(2,8*n)-1;C(this,t,e,n,u,0)}let o=n-1,i=1;for(this[e+o]=t&255;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},f.prototype.writeUint8=f.prototype.writeUInt8=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,1,255,0),this[e]=t&255,e+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function Q(t,e,n,r,o){ft(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i=i>>8,t[n++]=i,i=i>>8,t[n++]=i,i=i>>8,t[n++]=i;let u=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=u,u=u>>8,t[n++]=u,u=u>>8,t[n++]=u,u=u>>8,t[n++]=u,n}function tt(t,e,n,r,o){ft(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i=i>>8,t[n+6]=i,i=i>>8,t[n+5]=i,i=i>>8,t[n+4]=i;let u=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=u,u=u>>8,t[n+2]=u,u=u>>8,t[n+1]=u,u=u>>8,t[n]=u,n+8}f.prototype.writeBigUInt64LE=j(function(t,e=0){return Q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=j(function(t,e=0){return tt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=e>>>0,!r){let g=Math.pow(2,8*n-1);C(this,t,e,n,g-1,-g)}let o=0,i=1,u=0;for(this[e]=t&255;++o<n&&(i*=256);)t<0&&u===0&&this[e+o-1]!==0&&(u=1),this[e+o]=(t/i>>0)-u&255;return e+n},f.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=e>>>0,!r){let g=Math.pow(2,8*n-1);C(this,t,e,n,g-1,-g)}let o=n-1,i=1,u=0;for(this[e+o]=t&255;--o>=0&&(i*=256);)t<0&&u===0&&this[e+o+1]!==0&&(u=1),this[e+o]=(t/i>>0)-u&255;return e+n},f.prototype.writeInt8=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},f.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},f.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},f.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},f.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},f.prototype.writeBigInt64LE=j(function(t,e=0){return Q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=j(function(t,e=0){return tt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function et(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function nt(t,e,n,r,o){return e=+e,n=n>>>0,o||et(t,e,n,4,34028234663852886e22,-34028234663852886e22),s.write(t,e,n,r,23,4),n+4}f.prototype.writeFloatLE=function(t,e,n){return nt(this,t,e,!0,n)},f.prototype.writeFloatBE=function(t,e,n){return nt(this,t,e,!1,n)};function rt(t,e,n,r,o){return e=+e,n=n>>>0,o||et(t,e,n,8,17976931348623157e292,-17976931348623157e292),s.write(t,e,n,r,52,8),n+8}f.prototype.writeDoubleLE=function(t,e,n){return rt(this,t,e,!0,n)},f.prototype.writeDoubleBE=function(t,e,n){return rt(this,t,e,!1,n)},f.prototype.copy=function(t,e,n,r){if(!f.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&r!==0&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);let o=r-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},f.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(t.length===1){let i=t.charCodeAt(0);(r==="utf8"&&i<128||r==="latin1")&&(t=i)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let o;if(typeof t=="number")for(o=e;o<n;++o)this[o]=t;else{let i=f.isBuffer(t)?t:f.from(t,r),u=i.length;if(u===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%u]}return this};var k={};function z(t,e,n){k[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}z("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),z("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=ot(String(n)):typeof n=="bigint"&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=ot(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r},RangeError);function ot(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function At(t,e,n){F(e,"offset"),(t[e]===void 0||t[e+n]===void 0)&&D(e,t.length-(n+1))}function ft(t,e,n,r,o,i){if(t>n||t<e){let u=typeof e=="bigint"?"n":"",g;throw i>3?e===0||e===BigInt(0)?g=`>= 0${u} and < 2${u} ** ${(i+1)*8}${u}`:g=`>= -(2${u} ** ${(i+1)*8-1}${u}) and < 2 ** ${(i+1)*8-1}${u}`:g=`>= ${e}${u} and <= ${n}${u}`,new k.ERR_OUT_OF_RANGE("value",g,t)}At(r,o,i)}function F(t,e){if(typeof t!="number")throw new k.ERR_INVALID_ARG_TYPE(e,"number",t)}function D(t,e,n){throw Math.floor(t)!==t?(F(t,n),new k.ERR_OUT_OF_RANGE(n||"offset","an integer",t)):e<0?new k.ERR_BUFFER_OUT_OF_BOUNDS:new k.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}var It=/[^+/0-9A-Za-z-_]/g;function Ut(t){if(t=t.split("=")[0],t=t.trim().replace(It,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function G(t,e){e=e||1/0;let n,r=t.length,o=null,i=[];for(let u=0;u<r;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(u+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return i}function Rt(t){let e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function Tt(t,e){let n,r,o,i=[];for(let u=0;u<t.length&&!((e-=2)<0);++u)n=t.charCodeAt(u),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function it(t){return a.toByteArray(Ut(t))}function Y(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function N(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function X(t){return t!==t}var Ot=function(){let t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){let r=n*16;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function j(t){return typeof BigInt>"u"?St:t}function St(){throw new Error("BigInt not supported")}}),at={};Pt(at,{Buffer:()=>J,INSPECT_MAX_BYTES:()=>Ft,SlowBuffer:()=>kt,default:()=>zt,kMaxLength:()=>Dt});var lt=st(ht());$t(at,st(ht()));var{Buffer:J,SlowBuffer:kt,INSPECT_MAX_BYTES:Ft,kMaxLength:Dt}=lt,{default:ut,...Yt}=lt,zt=ut!==void 0?ut:Yt;globalThis.__Buffer$=J;})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/
var __global$ = globalThis || (typeof window !== "undefined" ? window : self);
var qn=Object.create;var Tt=Object.defineProperty;var Jn=Object.getOwnPropertyDescriptor;var Gn=Object.getOwnPropertyNames;var Yn=Object.getPrototypeOf,Xn=Object.prototype.hasOwnProperty;var Z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Qn=(e,t)=>{for(var r in t)Tt(e,r,{get:t[r],enumerable:!0})},Zn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Gn(t))!Xn.call(e,s)&&s!==r&&Tt(e,s,{get:()=>t[s],enumerable:!(n=Jn(t,s))||n.enumerable});return e};var se=(e,t,r)=>(r=e!=null?qn(Yn(e)):{},Zn(t||!e||!e.__esModule?Tt(r,"default",{value:e,enumerable:!0}):r,e));var Kr=Z((uc,Wr)=>{var He=1e3,ze=He*60,Ne=ze*60,Te=Ne*24,Us=Te*7,Ts=Te*365.25;Wr.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return js(e);if(r==="number"&&isFinite(e))return t.long?Ps(e):Ds(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function js(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Ts;case"weeks":case"week":case"w":return r*Us;case"days":case"day":case"d":return r*Te;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ne;case"minutes":case"minute":case"mins":case"min":case"m":return r*ze;case"seconds":case"second":case"secs":case"sec":case"s":return r*He;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ds(e){var t=Math.abs(e);return t>=Te?Math.round(e/Te)+"d":t>=Ne?Math.round(e/Ne)+"h":t>=ze?Math.round(e/ze)+"m":t>=He?Math.round(e/He)+"s":e+"ms"}function Ps(e){var t=Math.abs(e);return t>=Te?ht(e,t,Te,"day"):t>=Ne?ht(e,t,Ne,"hour"):t>=ze?ht(e,t,ze,"minute"):t>=He?ht(e,t,He,"second"):e+" ms"}function ht(e,t,r,n){var s=t>=r*1.5;return Math.round(e/r)+" "+n+(s?"s":"")}});var Jr=Z((lc,qr)=>{function Fs(e){r.debug=r,r.default=r,r.coerce=d,r.disable=i,r.enable=s,r.enabled=o,r.humanize=Kr(),r.destroy=g,Object.keys(e).forEach(b=>{r[b]=e[b]}),r.names=[],r.skips=[],r.formatters={};function t(b){let f=0;for(let h=0;h<b.length;h++)f=(f<<5)-f+b.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(b){let f,h=null,p,w;function E(...S){if(!E.enabled)return;let C=E,R=Number(new Date),F=R-(f||R);C.diff=F,C.prev=f,C.curr=R,f=R,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let v=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(H,j)=>{if(H==="%%")return"%";v++;let z=r.formatters[j];if(typeof z=="function"){let N=S[v];H=z.call(C,N),S.splice(v,1),v--}return H}),r.formatArgs.call(C,S),(C.log||r.log).apply(C,S)}return E.namespace=b,E.useColors=r.useColors(),E.color=r.selectColor(b),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,w=r.enabled(b)),w),set:S=>{h=S}}),typeof r.init=="function"&&r.init(E),E}function n(b,f){let h=r(this.namespace+(typeof f>"u"?":":f)+b);return h.log=this.log,h}function s(b){r.save(b),r.namespaces=b,r.names=[],r.skips=[];let f,h=(typeof b=="string"?b:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(b=h[f].replace(/\*/g,".*?"),b[0]==="-"?r.skips.push(new RegExp("^"+b.slice(1)+"$")):r.names.push(new RegExp("^"+b+"$")))}function i(){let b=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),b}function o(b){if(b[b.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(b))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(b))return!0;return!1}function c(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function d(b){return b instanceof Error?b.stack||b.message:b}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}qr.exports=Fs});var pe=Z((re,gt)=>{re.formatArgs=Ls;re.save=Hs;re.load=zs;re.useColors=Bs;re.storage=Ns();re.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();re.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Bs(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ls(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+gt.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),e.splice(n,0,t)}re.log=console.debug||console.log||(()=>{});function Hs(e){try{e?re.storage.setItem("debug",e):re.storage.removeItem("debug")}catch{}}function zs(){let e;try{e=re.storage.getItem("debug")}catch{}return!e&&typeof __Process$<"u"&&"env"in __Process$&&(e=__Process$.env.DEBUG),e}function Ns(){try{return localStorage}catch{}}gt.exports=Jr()(re);var{formatters:Vs}=gt.exports;Vs.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Yr=Z((dc,Xt)=>{"use strict";var $s=Object.prototype.hasOwnProperty,X="~";function Ze(){}Object.create&&(Ze.prototype=Object.create(null),new Ze().__proto__||(X=!1));function Ws(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Gr(e,t,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new Ws(r,n||e,s),o=X?X+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],i]:e._events[o].push(i):(e._events[o]=i,e._eventsCount++),e}function pt(e,t){--e._eventsCount===0?e._events=new Ze:delete e._events[t]}function Y(){this._events=new Ze,this._eventsCount=0}Y.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)$s.call(r,n)&&t.push(X?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Y.prototype.listeners=function(t){var r=X?X+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o};Y.prototype.listenerCount=function(t){var r=X?X+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Y.prototype.emit=function(t,r,n,s,i,o){var c=X?X+t:t;if(!this._events[c])return!1;var d=this._events[c],g=arguments.length,b,f;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),g){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,r),!0;case 3:return d.fn.call(d.context,r,n),!0;case 4:return d.fn.call(d.context,r,n,s),!0;case 5:return d.fn.call(d.context,r,n,s,i),!0;case 6:return d.fn.call(d.context,r,n,s,i,o),!0}for(f=1,b=new Array(g-1);f<g;f++)b[f-1]=arguments[f];d.fn.apply(d.context,b)}else{var h=d.length,p;for(f=0;f<h;f++)switch(d[f].once&&this.removeListener(t,d[f].fn,void 0,!0),g){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,r);break;case 3:d[f].fn.call(d[f].context,r,n);break;case 4:d[f].fn.call(d[f].context,r,n,s);break;default:if(!b)for(p=1,b=new Array(g-1);p<g;p++)b[p-1]=arguments[p];d[f].fn.apply(d[f].context,b)}}return!0};Y.prototype.on=function(t,r,n){return Gr(this,t,r,n,!1)};Y.prototype.once=function(t,r,n){return Gr(this,t,r,n,!0)};Y.prototype.removeListener=function(t,r,n,s){var i=X?X+t:t;if(!this._events[i])return this;if(!r)return pt(this,i),this;var o=this._events[i];if(o.fn)o.fn===r&&(!s||o.once)&&(!n||o.context===n)&&pt(this,i);else{for(var c=0,d=[],g=o.length;c<g;c++)(o[c].fn!==r||s&&!o[c].once||n&&o[c].context!==n)&&d.push(o[c]);d.length?this._events[i]=d.length===1?d[0]:d:pt(this,i)}return this};Y.prototype.removeAllListeners=function(t){var r;return t?(r=X?X+t:t,this._events[r]&&pt(this,r)):(this._events=new Ze,this._eventsCount=0),this};Y.prototype.off=Y.prototype.removeListener;Y.prototype.addListener=Y.prototype.on;Y.prefixed=X;Y.EventEmitter=Y;typeof Xt<"u"&&(Xt.exports=Y)});var Zt=Z(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.isBytes=Qr;_e.number=_t;_e.bool=Xr;_e.bytes=Qt;_e.hash=Zr;_e.exists=en;_e.output=tn;function _t(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Xr(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Qr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Qt(e,...t){if(!Qr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Zr(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_t(e.outputLen),_t(e.blockLen)}function en(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function tn(e,t){Qt(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Ks={number:_t,bool:Xr,bytes:Qt,hash:Zr,exists:en,output:tn};_e.default=Ks});var rn=Z(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.crypto=void 0;bt.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var rr=Z(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.Hash=U.nextTick=U.byteSwapIfBE=U.byteSwap=U.isLE=U.rotl=U.rotr=U.createView=U.u32=U.u8=void 0;U.isBytes=qs;U.byteSwap32=eo;U.bytesToHex=ro;U.hexToBytes=no;U.asyncLoop=oo;U.utf8ToBytes=sn;U.toBytes=yt;U.concatBytes=io;U.checkOpts=co;U.wrapConstructor=fo;U.wrapConstructorWithOpts=uo;U.wrapXOFConstructorWithOpts=lo;U.randomBytes=ho;var Ve=rn(),tr=Zt();function qs(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var Js=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);U.u8=Js;var Gs=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));U.u32=Gs;var Ys=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);U.createView=Ys;var Xs=(e,t)=>e<<32-t|e>>>t;U.rotr=Xs;var Qs=(e,t)=>e<<t|e>>>32-t>>>0;U.rotl=Qs;U.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var Zs=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;U.byteSwap=Zs;U.byteSwapIfBE=U.isLE?e=>e:e=>(0,U.byteSwap)(e);function eo(e){for(let t=0;t<e.length;t++)e[t]=(0,U.byteSwap)(e[t])}var to=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ro(e){(0,tr.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=to[e[r]];return t}var we={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function nn(e){if(e>=we._0&&e<=we._9)return e-we._0;if(e>=we._A&&e<=we._F)return e-(we._A-10);if(e>=we._a&&e<=we._f)return e-(we._a-10)}function no(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=nn(e.charCodeAt(i)),c=nn(e.charCodeAt(i+1));if(o===void 0||c===void 0){let d=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}n[s]=o*16+c}return n}var so=async()=>{};U.nextTick=so;async function oo(e,t,r){let n=Date.now();for(let s=0;s<e;s++){r(s);let i=Date.now()-n;i>=0&&i<t||(await(0,U.nextTick)(),n+=i)}}function sn(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function yt(e){return typeof e=="string"&&(e=sn(e)),(0,tr.bytes)(e),e}function io(...e){let t=0;for(let n=0;n<e.length;n++){let s=e[n];(0,tr.bytes)(s),t+=s.length}let r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){let i=e[n];r.set(i,s),s+=i.length}return r}var er=class{clone(){return this._cloneInto()}};U.Hash=er;var ao={}.toString;function co(e,t){if(t!==void 0&&ao.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function fo(e){let t=n=>e().update(yt(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function uo(e){let t=(n,s)=>e(s).update(yt(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function lo(e){let t=(n,s)=>e(s).update(yt(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function ho(e=32){if(Ve.crypto&&typeof Ve.crypto.getRandomValues=="function")return Ve.crypto.getRandomValues(new Uint8Array(e));if(Ve.crypto&&typeof Ve.crypto.randomBytes=="function")return Ve.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}});var on=Z(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.HashMD=Ae.Maj=Ae.Chi=void 0;var nr=Zt(),et=rr();function go(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),c=Number(r&i),d=n?4:0,g=n?0:4;e.setUint32(t+d,o,n),e.setUint32(t+g,c,n)}var po=(e,t,r)=>e&t^~e&r;Ae.Chi=po;var _o=(e,t,r)=>e&t^e&r^t&r;Ae.Maj=_o;var sr=class extends et.Hash{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,et.createView)(this.buffer)}update(t){(0,nr.exists)(this);let{view:r,buffer:n,blockLen:s}=this;t=(0,et.toBytes)(t);let i=t.length;for(let o=0;o<i;){let c=Math.min(s-this.pos,i-o);if(c===s){let d=(0,et.createView)(t);for(;s<=i-o;o+=s)this.process(d,o);continue}n.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,nr.exists)(this),(0,nr.output)(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let f=o;f<s;f++)r[f]=0;go(n,s-8,BigInt(this.length*8),i),this.process(n,0);let c=(0,et.createView)(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let g=d/4,b=this.get();if(g>b.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<g;f++)c.setUint32(4*f,b[f],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:c}=this;return t.length=s,t.pos=c,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}};Ae.HashMD=sr});var an=Z(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.sha224=Ce.sha256=Ce.SHA256=void 0;var or=on(),ie=rr(),bo=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ee=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ke=new Uint32Array(64),tt=class extends or.HashMD{constructor(){super(64,32,8,!1),this.A=Ee[0]|0,this.B=Ee[1]|0,this.C=Ee[2]|0,this.D=Ee[3]|0,this.E=Ee[4]|0,this.F=Ee[5]|0,this.G=Ee[6]|0,this.H=Ee[7]|0}get(){let{A:t,B:r,C:n,D:s,E:i,F:o,G:c,H:d}=this;return[t,r,n,s,i,o,c,d]}set(t,r,n,s,i,o,c,d){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=d|0}process(t,r){for(let f=0;f<16;f++,r+=4)ke[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let h=ke[f-15],p=ke[f-2],w=(0,ie.rotr)(h,7)^(0,ie.rotr)(h,18)^h>>>3,E=(0,ie.rotr)(p,17)^(0,ie.rotr)(p,19)^p>>>10;ke[f]=E+ke[f-7]+w+ke[f-16]|0}let{A:n,B:s,C:i,D:o,E:c,F:d,G:g,H:b}=this;for(let f=0;f<64;f++){let h=(0,ie.rotr)(c,6)^(0,ie.rotr)(c,11)^(0,ie.rotr)(c,25),p=b+h+(0,or.Chi)(c,d,g)+bo[f]+ke[f]|0,E=((0,ie.rotr)(n,2)^(0,ie.rotr)(n,13)^(0,ie.rotr)(n,22))+(0,or.Maj)(n,s,i)|0;b=g,g=d,d=c,c=o+p|0,o=i,i=s,s=n,n=p+E|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,d=d+this.F|0,g=g+this.G|0,b=b+this.H|0,this.set(n,s,i,o,c,d,g,b)}roundClean(){ke.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Ce.SHA256=tt;var ir=class extends tt{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Ce.sha256=(0,ie.wrapConstructor)(()=>new tt);Ce.sha224=(0,ie.wrapConstructor)(()=>new ir)});var fn=Z((mc,cn)=>{"use strict";function yo(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=e.length,c=e.charAt(0),d=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function b(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var w=0,E=0,S=0,C=p.length;S!==C&&p[S]===0;)S++,w++;for(var R=(C-S)*g+1>>>0,F=new Uint8Array(R);S!==C;){for(var v=p[S],T=0,H=R-1;(v!==0||T<E)&&H!==-1;H--,T++)v+=256*F[H]>>>0,F[H]=v%o>>>0,v=v/o>>>0;if(v!==0)throw new Error("Non-zero carry");E=T,S++}for(var j=R-E;j!==R&&F[j]===0;)j++;for(var z=c.repeat(w);j<R;++j)z+=e.charAt(F[j]);return z}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var w=0,E=0,S=0;p[w]===c;)E++,w++;for(var C=(p.length-w)*d+1>>>0,R=new Uint8Array(C);p[w];){var F=t[p.charCodeAt(w)];if(F===255)return;for(var v=0,T=C-1;(F!==0||v<S)&&T!==-1;T--,v++)F+=o*R[T]>>>0,R[T]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");S=v,w++}for(var H=C-S;H!==C&&R[H]===0;)H++;for(var j=new Uint8Array(E+(C-H)),z=E;H!==C;)j[z++]=R[H++];return j}function h(p){var w=f(p);if(w)return w;throw new Error("Non-base"+o+" character")}return{encode:b,decodeUnsafe:f,decode:h}}cn.exports=yo});var ln=Z((wc,un)=>{var mo=fn(),wo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";un.exports=mo(wo)});var hn=Z((xc,dn)=>{"use strict";var ar=ln();dn.exports=function(e){function t(i){var o=Uint8Array.from(i),c=e(o),d=o.length+4,g=new Uint8Array(d);return g.set(o,0),g.set(c.subarray(0,4),o.length),ar.encode(g,d)}function r(i){var o=i.slice(0,-4),c=i.slice(-4),d=e(o);if(!(c[0]^d[0]|c[1]^d[1]|c[2]^d[2]|c[3]^d[3]))return o}function n(i){var o=ar.decodeUnsafe(i);if(o)return r(o)}function s(i){var o=ar.decode(i),c=r(o,e);if(!c)throw new Error("Invalid checksum");return c}return{encode:t,decode:s,decodeUnsafe:n}}});var _n=Z((vc,pn)=>{"use strict";var{sha256:gn}=an(),xo=hn();function vo(e){return gn(gn(e))}pn.exports=xo(vo)});var Ln=Z((Bn,Mt)=>{(function(e,t){var r={};t(r);var n=r.default;for(var s in r)n[s]=r[s];typeof Mt=="object"&&typeof Mt.exports=="object"?Mt.exports=n:typeof define=="function"&&define.amd?define(function(){return n}):e.sha256=n})(Bn,function(e){"use strict";e.__esModule=!0,e.digestLength=32,e.blockSize=64;var t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(f,h,p,w,E){for(var S,C,R,F,v,T,H,j,z,N,me,fe,Oe;E>=64;){for(S=h[0],C=h[1],R=h[2],F=h[3],v=h[4],T=h[5],H=h[6],j=h[7],N=0;N<16;N++)me=w+N*4,f[N]=(p[me]&255)<<24|(p[me+1]&255)<<16|(p[me+2]&255)<<8|p[me+3]&255;for(N=16;N<64;N++)z=f[N-2],fe=(z>>>17|z<<15)^(z>>>19|z<<13)^z>>>10,z=f[N-15],Oe=(z>>>7|z<<25)^(z>>>18|z<<14)^z>>>3,f[N]=(fe+f[N-7]|0)+(Oe+f[N-16]|0);for(N=0;N<64;N++)fe=(((v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&T^~v&H)|0)+(j+(t[N]+f[N]|0)|0)|0,Oe=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&C^S&R^C&R)|0,j=H,H=T,T=v,v=F+fe|0,F=R,R=C,C=S,S=fe+Oe|0;h[0]+=S,h[1]+=C,h[2]+=R,h[3]+=F,h[4]+=v,h[5]+=T,h[6]+=H,h[7]+=j,w+=64,E-=64}return w}var n=function(){function f(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return f.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},f.prototype.clean=function(){for(var h=0;h<this.buffer.length;h++)this.buffer[h]=0;for(var h=0;h<this.temp.length;h++)this.temp[h]=0;this.reset()},f.prototype.update=function(h,p){if(p===void 0&&(p=h.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this.bytesHashed+=p,this.bufferLength>0){for(;this.bufferLength<64&&p>0;)this.buffer[this.bufferLength++]=h[w++],p--;this.bufferLength===64&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(p>=64&&(w=r(this.temp,this.state,h,w,p),p%=64);p>0;)this.buffer[this.bufferLength++]=h[w++],p--;return this},f.prototype.finish=function(h){if(!this.finished){var p=this.bytesHashed,w=this.bufferLength,E=p/536870912|0,S=p<<3,C=p%64<56?64:128;this.buffer[w]=128;for(var R=w+1;R<C-8;R++)this.buffer[R]=0;this.buffer[C-8]=E>>>24&255,this.buffer[C-7]=E>>>16&255,this.buffer[C-6]=E>>>8&255,this.buffer[C-5]=E>>>0&255,this.buffer[C-4]=S>>>24&255,this.buffer[C-3]=S>>>16&255,this.buffer[C-2]=S>>>8&255,this.buffer[C-1]=S>>>0&255,r(this.temp,this.state,this.buffer,0,C),this.finished=!0}for(var R=0;R<8;R++)h[R*4+0]=this.state[R]>>>24&255,h[R*4+1]=this.state[R]>>>16&255,h[R*4+2]=this.state[R]>>>8&255,h[R*4+3]=this.state[R]>>>0&255;return this},f.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},f.prototype._saveState=function(h){for(var p=0;p<this.state.length;p++)h[p]=this.state[p]},f.prototype._restoreState=function(h,p){for(var w=0;w<this.state.length;w++)this.state[w]=h[w];this.bytesHashed=p,this.finished=!1,this.bufferLength=0},f}();e.Hash=n;var s=function(){function f(h){this.inner=new n,this.outer=new n,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var p=new Uint8Array(this.blockSize);if(h.length>this.blockSize)new n().update(h).finish(p).clean();else for(var w=0;w<h.length;w++)p[w]=h[w];for(var w=0;w<p.length;w++)p[w]^=54;this.inner.update(p);for(var w=0;w<p.length;w++)p[w]^=106;this.outer.update(p),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var w=0;w<p.length;w++)p[w]=0}return f.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},f.prototype.clean=function(){for(var h=0;h<this.istate.length;h++)this.ostate[h]=this.istate[h]=0;this.inner.clean(),this.outer.clean()},f.prototype.update=function(h){return this.inner.update(h),this},f.prototype.finish=function(h){return this.outer.finished?this.outer.finish(h):(this.inner.finish(h),this.outer.update(h,this.digestLength).finish(h)),this},f.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},f}();e.HMAC=s;function i(f){var h=new n().update(f),p=h.digest();return h.clean(),p}e.hash=i,e.default=i;function o(f,h){var p=new s(f).update(h),w=p.digest();return p.clean(),w}e.hmac=o;function c(f,h,p,w){var E=w[0];if(E===0)throw new Error("hkdf: cannot expand more");h.reset(),E>1&&h.update(f),p&&h.update(p),h.update(w),h.finish(f),w[0]++}var d=new Uint8Array(e.digestLength);function g(f,h,p,w){h===void 0&&(h=d),w===void 0&&(w=32);for(var E=new Uint8Array([1]),S=o(h,f),C=new s(S),R=new Uint8Array(C.digestLength),F=R.length,v=new Uint8Array(w),T=0;T<w;T++)F===R.length&&(c(R,C,p,E),F=0),v[T]=R[F++];return C.clean(),R.fill(0),E.fill(0),v}e.hkdf=g;function b(f,h,p,w){for(var E=new s(f),S=E.digestLength,C=new Uint8Array(4),R=new Uint8Array(S),F=new Uint8Array(S),v=new Uint8Array(w),T=0;T*S<w;T++){var H=T+1;C[0]=H>>>24&255,C[1]=H>>>16&255,C[2]=H>>>8&255,C[3]=H>>>0&255,E.reset(),E.update(h),E.update(C),E.finish(F);for(var j=0;j<S;j++)R[j]=F[j];for(var j=2;j<=p;j++){E.reset(),E.update(F).finish(F);for(var z=0;z<S;z++)R[z]^=F[z]}for(var j=0;j<S&&T*S+j<w;j++)v[T*S+j]=R[j]}for(var T=0;T<S;T++)R[T]=F[T]=0;for(var T=0;T<4;T++)C[T]=0;return E.clean(),v}e.pbkdf2=b})});var ue=Symbol.for("_am_meta"),Me=Symbol.for("_am_trace"),Ue=Symbol.for("_am_objectId"),Ge=Symbol.for("_am_isProxy"),at=Symbol.for("_am_clearCache"),jt=Symbol.for("_am_uint"),Dt=Symbol.for("_am_int"),Pt=Symbol.for("_am_f64"),ct=Symbol.for("_am_counter"),Or=Symbol.for("_am_text");var de=class e{constructor(t){if(typeof t=="string")this.elems=[...t];else if(Array.isArray(t))this.elems=t;else if(t===void 0)this.elems=[];else throw new TypeError(`Unsupported initial value for Text: ${t}`);Reflect.defineProperty(this,Or,{value:!0})}get length(){return this.elems.length}get(t){return this.elems[t]}[Symbol.iterator](){let t=this.elems,r=-1;return{next(){return r+=1,r<t.length?{done:!1,value:t[r]}:{done:!0}}}}toString(){if(!this.str){this.str="";for(let t of this.elems)typeof t=="string"?this.str+=t:this.str+="\uFFFC"}return this.str}toSpans(){if(!this.spans){this.spans=[];let t="";for(let r of this.elems)typeof r=="string"?t+=r:(t.length>0&&(this.spans.push(t),t=""),this.spans.push(r));t.length>0&&this.spans.push(t)}return this.spans}toJSON(){return this.toString()}set(t,r){if(this[ue])throw new RangeError("object cannot be modified outside of a change block");this.elems[t]=r}insertAt(t,...r){if(this[ue])throw new RangeError("object cannot be modified outside of a change block");r.every(n=>typeof n=="string")?this.elems.splice(t,0,...r.join("")):this.elems.splice(t,0,...r)}deleteAt(t,r=1){if(this[ue])throw new RangeError("object cannot be modified outside of a change block");this.elems.splice(t,r)}map(t){this.elems.map(t)}lastIndexOf(t,r){this.elems.lastIndexOf(t,r)}concat(t){return new e(this.elems.concat(t.elems))}every(t){return this.elems.every(t)}filter(t){return new e(this.elems.filter(t))}find(t){return this.elems.find(t)}findIndex(t){return this.elems.findIndex(t)}forEach(t){this.elems.forEach(t)}includes(t){return this.elems.includes(t)}indexOf(t){return this.elems.indexOf(t)}join(t){return this.elems.join(t)}reduce(t){this.elems.reduce(t)}reduceRight(t){this.elems.reduceRight(t)}slice(t,r){return new e(this.elems.slice(t,r))}some(t){return this.elems.some(t)}toLocaleString(){this.toString()}};var he=class{constructor(t){this.value=t||0,Reflect.defineProperty(this,ct,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(t){throw new Error("Counters should not be incremented outside of a change callback")}decrement(t){throw new Error("Counters should not be decremented outside of a change callback")}},Ft=class extends he{constructor(t,r,n,s,i){super(t),this.context=r,this.path=n,this.objectId=s,this.key=i}increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}};function Mr(e,t,r,n,s){return new Ft(e,t,r,n,s)}var ve=class{constructor(t){this.val=t}toString(){return this.val}toJSON(){return this.val}};function ge(e){if(typeof e=="string"&&/^[0-9]+$/.test(e)&&(e=parseInt(e,10)),typeof e!="number")return e;if(e<0||isNaN(e)||e===1/0||e===-1/0)throw new RangeError("A list index must be positive, but you passed "+e);return e}function oe(e,t){let{context:r,objectId:n,path:s,textV2:i}=e,o=r.getWithType(n,t);if(o===null)return;let c=o[0],d=o[1];switch(c){case void 0:return;case"map":return Xe(r,d,i,[...s,t]);case"list":return Qe(r,d,i,[...s,t]);case"text":return i?r.text(d):Ye(r,d,[...s,t]);case"str":return d;case"uint":return d;case"int":return d;case"f64":return d;case"boolean":return d;case"null":return null;case"bytes":return d;case"timestamp":return d;case"counter":return Mr(d,r,s,n,t);default:throw RangeError(`datatype ${c} unimplemented`)}}function ft(e,t,r,n){let s=typeof e;switch(s){case"object":if(e==null)return[null,"null"];if(e[jt])return[e.value,"uint"];if(e[Dt])return[e.value,"int"];if(e[Pt])return[e.value,"f64"];if(e[ct])return[e.value,"counter"];if(e instanceof Date)return[e.getTime(),"timestamp"];if(e instanceof ve)return[e.toString(),"str"];if(e instanceof de)return[e,"text"];if(e instanceof Uint8Array)return[e,"bytes"];if(e instanceof Array)return[e,"list"];if(Object.prototype.toString.call(e)==="[object Object]")return[e,"map"];throw lt(e,n)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${e}`);case"boolean":return[e,"boolean"];case"number":return Number.isInteger(e)?[e,"int"]:[e,"f64"];case"string":return t?[e,"text"]:[e,"str"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${Ur(r)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${s} value at ${Ur(r)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${s} values are not. `].join(""))}}function lt(e,t){var r,n;return e instanceof Date?!1:!!(e&&((n=(r=e[ue])===null||r===void 0?void 0:r.handle)===null||n===void 0?void 0:n.__wbg_ptr)===t.__wbg_ptr)}var es={get(e,t){let{context:r,objectId:n,cache:s}=e;return t===Symbol.toStringTag?e[Symbol.toStringTag]:t===Ue?n:t===Ge?!0:t===Me?e.trace:t===ue?{handle:r,textV2:e.textV2}:(s[t]||(s[t]=oe(e,t)),s[t])},set(e,t,r){let{context:n,objectId:s,path:i,textV2:o}=e;if(e.cache={},lt(r,n))throw new RangeError("Cannot create a reference to an existing document object");if(t===Me)return e.trace=r,!0;if(t===at)return!0;let[c,d]=ft(r,o,[...i,t],n);switch(d){case"list":{let g=n.putObject(s,t,[]),b=Qe(n,g,o,[...i,t]);for(let f=0;f<c.length;f++)b[f]=c[f];break}case"text":{if(o)ut(c),n.putObject(s,t,c);else{Nt(c);let g=n.putObject(s,t,"");Ye(n,g,[...i,t]).splice(0,0,...c)}break}case"map":{let g=n.putObject(s,t,{}),b=Xe(n,g,o,[...i,t]);for(let f in c)b[f]=c[f];break}default:n.put(s,t,c,d)}return!0},deleteProperty(e,t){let{context:r,objectId:n}=e;return e.cache={},r.delete(n,t),!0},has(e,t){return this.get(e,t)!==void 0},getOwnPropertyDescriptor(e,t){let r=this.get(e,t);if(typeof r<"u")return{configurable:!0,enumerable:!0,value:r}},ownKeys(e){let{context:t,objectId:r}=e,n=t.keys(r);return[...new Set(n)]}},Tr={get(e,t){let{context:r,objectId:n}=e;return t=ge(t),t===Symbol.hasInstance?s=>Array.isArray(s):t===Symbol.toStringTag?e[Symbol.toStringTag]:t===Ue?n:t===Ge?!0:t===Me?e.trace:t===ue?{handle:r}:t==="length"?r.length(n):typeof t=="number"?oe(e,t):zt(e)[t]},set(e,t,r){let{context:n,objectId:s,path:i,textV2:o}=e;if(t=ge(t),lt(r,n))throw new RangeError("Cannot create a reference to an existing document object");if(t===at)return!0;if(t===Me)return e.trace=r,!0;if(typeof t=="string")throw new RangeError("list index must be a number");let[c,d]=ft(r,o,[...i,t],n);switch(d){case"list":{let g;t>=n.length(s)?g=n.insertObject(s,t,[]):g=n.putObject(s,t,[]),Qe(n,g,o,[...i,t]).splice(0,0,...c);break}case"text":{if(o)ut(c),t>=n.length(s)?n.insertObject(s,t,c):n.putObject(s,t,c);else{let g;Nt(c),t>=n.length(s)?g=n.insertObject(s,t,""):g=n.putObject(s,t,""),Ye(n,g,[...i,t]).splice(0,0,...c)}break}case"map":{let g;t>=n.length(s)?g=n.insertObject(s,t,{}):g=n.putObject(s,t,{});let b=Xe(n,g,o,[...i,t]);for(let f in c)b[f]=c[f];break}default:t>=n.length(s)?n.insert(s,t,c,d):n.put(s,t,c,d)}return!0},deleteProperty(e,t){let{context:r,objectId:n}=e;t=ge(t);let s=r.get(n,t);if(s!=null&&s[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return r.delete(n,t),!0},has(e,t){let{context:r,objectId:n}=e;return t=ge(t),typeof t=="number"?t<r.length(n):t==="length"},getOwnPropertyDescriptor(e,t){let{context:r,objectId:n}=e;return t==="length"?{writable:!0,value:r.length(n)}:t===Ue?{configurable:!1,enumerable:!1,value:n}:(t=ge(t),{configurable:!0,enumerable:!0,value:oe(e,t)})},getPrototypeOf(e){return Object.getPrototypeOf(e)},ownKeys(){let e=[];return e.push("length"),e}},ts=Object.assign({},Tr,{get(e,t){let{context:r,objectId:n}=e;return t=ge(t),t===Symbol.hasInstance?s=>Array.isArray(s):t===Symbol.toStringTag?e[Symbol.toStringTag]:t===Ue?n:t===Ge?!0:t===Me?e.trace:t===ue?{handle:r}:t==="length"?r.length(n):typeof t=="number"?oe(e,t):rs(e)[t]||zt(e)[t]},getPrototypeOf(){return Object.getPrototypeOf(new de)}});function Xe(e,t,r,n){let s={context:e,objectId:t,path:n||[],cache:{},textV2:r},i={};return Object.assign(i,s),new Proxy(i,es)}function Qe(e,t,r,n){let s={context:e,objectId:t,path:n||[],cache:{},textV2:r},i=[];return Object.assign(i,s),new Proxy(i,Tr)}function Ye(e,t,r){let n={context:e,objectId:t,path:r||[],cache:{},textV2:!1},s={};return Object.assign(s,n),new Proxy(s,ts)}function zt(e){let{context:t,objectId:r,path:n,textV2:s}=e;return{deleteAt(o,c){return typeof c=="number"?t.splice(r,o,c):t.delete(r,o),this},fill(o,c,d){let[g,b]=ft(o,s,[...n,c],t),f=t.length(r);c=ge(c||0),d=ge(d||f);for(let h=c;h<Math.min(d,f);h++)if(b==="list"||b==="map")t.putObject(r,h,g);else if(b==="text")if(s)ut(g),t.putObject(r,h,g);else{Nt(g);let p=t.putObject(r,h,""),w=Ye(t,p,[...n,h]);for(let E=0;E<g.length;E++)w[E]=g.get(E)}else t.put(r,h,g,b);return this},indexOf(o,c=0){let d=t.length(r);for(let g=c;g<d;g++){let b=t.getWithType(r,g);if(b&&(b[1]===o[Ue]||b[1]===o))return g}return-1},insertAt(o,...c){return this.splice(o,0,...c),this},pop(){let o=t.length(r);if(o==0)return;let c=oe(e,o-1);return t.delete(r,o-1),c},push(...o){let c=t.length(r);return this.splice(c,0,...o),t.length(r)},shift(){if(t.length(r)==0)return;let o=oe(e,0);return t.delete(r,0),o},splice(o,c,...d){o=ge(o),typeof c!="number"&&(c=t.length(r)-o),c=ge(c);for(let f of d)if(lt(f,t))throw new RangeError("Cannot create a reference to an existing document object");let g=[];for(let f=0;f<c;f++){let h=oe(e,o);h!==void 0&&g.push(h),t.delete(r,o)}let b=d.map((f,h)=>{try{return ft(f,s,[...n],t)}catch(p){throw p instanceof RangeError?new RangeError(`${p.message} (at index ${h} in the input)`):p}});for(let[f,h]of b){switch(h){case"list":{let p=t.insertObject(r,o,[]);Qe(t,p,s,[...n,o]).splice(0,0,...f);break}case"text":{if(s)ut(f),t.insertObject(r,o,f);else{let p=t.insertObject(r,o,"");Ye(t,p,[...n,o]).splice(0,0,...f)}break}case"map":{let p=t.insertObject(r,o,{}),w=Xe(t,p,s,[...n,o]);for(let E in f)w[E]=f[E];break}default:t.insert(r,o,f,h)}o+=1}return g},unshift(...o){return this.splice(0,0,...o),t.length(r)},entries(){let o=0;return{next:()=>{let d=oe(e,o);return d===void 0?{value:void 0,done:!0}:{value:[o++,d],done:!1}},[Symbol.iterator](){return this}}},keys(){let o=0,c=t.length(r);return{next:()=>o<c?{value:o++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let o=0;return{next:()=>{let d=oe(e,o++);return d===void 0?{value:void 0,done:!0}:{value:d,done:!1}},[Symbol.iterator](){return this}}},toArray(){let o=[],c;do c=oe(e,o.length),c!==void 0&&o.push(c);while(c!==void 0);return o},map(o){return this.toArray().map(o)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(o){return this.toArray().forEach(o)},concat(o){return this.toArray().concat(o)},every(o){return this.toArray().every(o)},filter(o){return this.toArray().filter(o)},find(o){let c=0;for(let d of this){if(o(d,c))return d;c+=1}},findIndex(o){let c=0;for(let d of this){if(o(d,c))return c;c+=1}return-1},includes(o){return this.find(c=>c===o)!==void 0},join(o){return this.toArray().join(o)},reduce(o,c){return this.toArray().reduce(o,c)},reduceRight(o,c){return this.toArray().reduceRight(o,c)},lastIndexOf(o,c=1/0){return this.toArray().lastIndexOf(o,c)},slice(o,c){return this.toArray().slice(o,c)},some(o){let c=0;for(let d of this){if(o(d,c))return!0;c+=1}return!1},[Symbol.iterator]:function*(){let o=0,c=oe(e,o);for(;c!==void 0;)yield c,o+=1,c=oe(e,o)}}}function rs(e){let{context:t,objectId:r}=e;return{set(s,i){return this[s]=i},get(s){return this[s]},toString(){return t.text(r).replace(//g,"")},toSpans(){let s=[],i="",o=t.length(r);for(let c=0;c<o;c++){let d=this[c];typeof d=="string"?i+=d:(i.length>0&&(s.push(i),i=""),s.push(d))}return i.length>0&&s.push(i),s},toJSON(){return this.toString()},indexOf(s,i=0){return t.text(r).indexOf(s,i)},insertAt(s,...i){i.every(o=>typeof o=="string")?t.splice(r,s,0,i.join("")):zt(e).insertAt(s,...i)}}}function Nt(e){if(!(e instanceof de))throw new Error("value was not a Text instance")}function ut(e){if(typeof e!="string")throw new Error("value was not a string")}function Ur(e){let t=e.map(r=>{if(typeof r=="number")return r.toString();if(typeof r=="string")return r.replace(/~/g,"~0").replace(/\//g,"~1")});return e.length===0?"":"/"+t.join("/")}var dt,ns=new Uint8Array(16);function Vt(){if(!dt&&(dt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dt(ns)}var G=[];for(let e=0;e<256;++e)G.push((e+256).toString(16).slice(1));function jr(e,t=0){return G[e[t+0]]+G[e[t+1]]+G[e[t+2]]+G[e[t+3]]+"-"+G[e[t+4]]+G[e[t+5]]+"-"+G[e[t+6]]+G[e[t+7]]+"-"+G[e[t+8]]+G[e[t+9]]+"-"+G[e[t+10]]+G[e[t+11]]+G[e[t+12]]+G[e[t+13]]+G[e[t+14]]+G[e[t+15]]}var ss=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$t={randomUUID:ss};function os(e,t,r){if($t.randomUUID&&!t&&!e)return $t.randomUUID();e=e||{};let n=e.random||(e.rng||Vt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let s=0;s<16;++s)t[r+s]=n[s];return t}return jr(n)}var Wt=os;function Dr(){return Wt().replace(/-/g,"")}var Kt=Dr,qt=()=>Kt();qt.setFactory=e=>{Kt=e};qt.reset=()=>{Kt=Dr};var Pr,Fr=new Array(128).fill(void 0);Fr.push(void 0,null,!0,!1);var ia=Fr.length;var Jt=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},aa=typeof Jt.encodeInto=="function"?function(e,t){return Jt.encodeInto(e,t)}:function(e,t){let r=Jt.encode(e);return t.set(r),{read:e.length,written:r.length}};var is=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&is.decode();var ca=Object.freeze({Array:0,0:"Array",String:1,1:"String"}),fa=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>Pr.__wbg_automerge_free(e>>>0));var ua=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>Pr.__wbg_syncstate_free(e>>>0));var Ea=Symbol("_syncstate");var Qo=se(pe(),1);var Se=se(Yr(),1);var So=se(_n(),1);var Be={};Qn(Be,{decode:()=>Xo,encode:()=>jn});var cr;try{cr=new TextDecoder}catch{}var A,De,_=0;var vn=[],Ao=105,Eo=57342,ko=57343,bn=57337;var yn=6,$e={},rt=11281e4,xe=1681e4;var fr=vn,ur=0,P={},$,xt,vt=0,st=0,K,ae,W=[],lr=[],ee,Q,nt,mn={useRecords:!1,mapsAsObjects:!0},ot=!1,Sn=2;try{new Function("")}catch{Sn=1/0}var Pe=class e{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[r,n]of Object.entries(t.keyMap))this.mapKey.set(n,r)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let r=new Map;for(let[n,s]of Object.entries(t))r.set(this._keyMap.hasOwnProperty(n)?this._keyMap[n]:n,s);return r}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[n,s]of Object.entries(this._keyMap))this._mapKey.set(s,n)}let r={};return t.forEach((n,s)=>r[ce(this._mapKey.has(s)?this._mapKey.get(s):s)]=n),r}mapDecode(t,r){let n=this.decode(t);if(this._keyMap)switch(n.constructor.name){case"Array":return n.map(s=>this.decodeKeys(s))}return n}decode(t,r){if(A)return Cn(()=>(St(),this?this.decode(t,r):e.prototype.decode.call(mn,t,r)));De=r>-1?r:t.length,_=0,ur=0,st=0,xt=null,fr=vn,K=null,A=t;try{Q=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(n){throw A=null,t instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof e){if(P=this,ee=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return $=this.structures,mt();(!$||$.length>0)&&($=[])}else P=mn,(!$||$.length>0)&&($=[]),ee=null;return mt()}decodeMultiple(t,r){let n,s=0;try{let i=t.length;ot=!0;let o=this?this.decode(t,i):_r.decode(t,i);if(r){if(r(o)===!1)return;for(;_<i;)if(s=_,r(mt())===!1)return}else{for(n=[o];_<i;)s=_,n.push(mt());return n}}catch(i){throw i.lastPosition=s,i.values=n,i}finally{ot=!1,St()}}};function mt(){try{let e=B();if(K){if(_>=K.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}_=K.postBundlePosition,K=null}if(_==De)$=null,A=null,ae&&(ae=null);else if(_>De){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!ot)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw St(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function B(){let e=A[_++],t=e>>5;if(e=e&31,e>23)switch(e){case 24:e=A[_++];break;case 25:if(t==7)return Oo();e=Q.getUint16(_),_+=2;break;case 26:if(t==7){let r=Q.getFloat32(_);if(P.useFloat32>2){let n=At[(A[_]&127)<<1|A[_+1]>>7];return _+=4,(n*r+(r>0?.5:-.5)>>0)/n}return _+=4,r}e=Q.getUint32(_),_+=4;break;case 27:if(t==7){let r=Q.getFloat64(_);return _+=8,r}if(t>1){if(Q.getUint32(_)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=Q.getUint32(_+4)}else P.int64AsNumber?(e=Q.getUint32(_)*4294967296,e+=Q.getUint32(_+4)):e=Q.getBigUint64(_);_+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let r=[],n,s=0;for(;(n=B())!=$e;){if(s>=rt)throw new Error(`Array length exceeds ${rt}`);r[s++]=n}return t==4?r:t==3?r.join(""):__Buffer$.concat(r);case 5:let i;if(P.mapsAsObjects){let o={},c=0;if(P.keyMap)for(;(i=B())!=$e;){if(c++>=xe)throw new Error(`Property count exceeds ${xe}`);o[ce(P.decodeKey(i))]=B()}else for(;(i=B())!=$e;){if(c++>=xe)throw new Error(`Property count exceeds ${xe}`);o[ce(i)]=B()}return o}else{nt&&(P.mapsAsObjects=!0,nt=!1);let o=new Map;if(P.keyMap){let c=0;for(;(i=B())!=$e;){if(c++>=xe)throw new Error(`Map size exceeds ${xe}`);o.set(P.decodeKey(i),B())}}else{let c=0;for(;(i=B())!=$e;){if(c++>=xe)throw new Error(`Map size exceeds ${xe}`);o.set(i,B())}}return o}case 7:return $e;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return Ro(e);case 3:if(st>=_)return xt.slice(_-vt,(_+=e)-vt);if(st==0&&De<140&&e<32){let s=e<16?An(e):Io(e);if(s!=null)return s}return Co(e);case 4:if(e>=rt)throw new Error(`Array length exceeds ${rt}`);let r=new Array(e);for(let s=0;s<e;s++)r[s]=B();return r;case 5:if(e>=xe)throw new Error(`Map size exceeds ${rt}`);if(P.mapsAsObjects){let s={};if(P.keyMap)for(let i=0;i<e;i++)s[ce(P.decodeKey(B()))]=B();else for(let i=0;i<e;i++)s[ce(B())]=B();return s}else{nt&&(P.mapsAsObjects=!0,nt=!1);let s=new Map;if(P.keyMap)for(let i=0;i<e;i++)s.set(P.decodeKey(B()),B());else for(let i=0;i<e;i++)s.set(B(),B());return s}case 6:if(e>=bn){let s=$[e&8191];if(s)return s.read||(s.read=dr(s)),s.read();if(e<65536){if(e==ko){let i=Ke(),o=B(),c=B();gr(o,c);let d={};if(P.keyMap)for(let g=2;g<i;g++){let b=P.decodeKey(c[g-2]);d[ce(b)]=B()}else for(let g=2;g<i;g++){let b=c[g-2];d[ce(b)]=B()}return d}else if(e==Eo){let i=Ke(),o=B();for(let c=2;c<i;c++)gr(o++,B());return B()}else if(e==bn)return Po();if(P.getShared&&(pr(),s=$[e&8191],s))return s.read||(s.read=dr(s)),s.read()}}let n=W[e];if(n)return n.handlesRead?n(B):n(B());{let s=B();for(let i=0;i<lr.length;i++){let o=lr[i](e,s);if(o!==void 0)return o}return new le(s,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let s=(ee||je())[e];if(s!==void 0)return s;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let s=new Error("Unexpected end of CBOR data");throw s.incomplete=!0,s}throw new Error("Unknown CBOR token "+e)}}var wn=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function dr(e){if(!e)throw new Error("Structure is required in record definition");function t(){let r=A[_++];if(r=r&31,r>23)switch(r){case 24:r=A[_++];break;case 25:r=Q.getUint16(_),_+=2;break;case 26:r=Q.getUint32(_),_+=4;break;default:throw new Error("Expected array header, but got "+A[_-1])}let n=this.compiledReader;for(;n;){if(n.propertyCount===r)return n(B);n=n.next}if(this.slowReads++>=Sn){let i=this.length==r?this:this.slice(0,r);return n=P.keyMap?new Function("r","return {"+i.map(o=>P.decodeKey(o)).map(o=>wn.test(o)?ce(o)+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}"):new Function("r","return {"+i.map(o=>wn.test(o)?ce(o)+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}"),this.compiledReader&&(n.next=this.compiledReader),n.propertyCount=r,this.compiledReader=n,n(B)}let s={};if(P.keyMap)for(let i=0;i<r;i++)s[ce(P.decodeKey(this[i]))]=B();else for(let i=0;i<r;i++)s[ce(this[i])]=B();return s}return e.slowReads=0,t}function ce(e){if(typeof e=="string")return e==="__proto__"?"__proto_":e;if(typeof e=="number"||typeof e=="boolean"||typeof e=="bigint")return e.toString();if(e==null)return e+"";throw new Error("Invalid property name type "+typeof e)}var Co=hr;function hr(e){let t;if(e<16&&(t=An(e)))return t;if(e>64&&cr)return cr.decode(A.subarray(_,_+=e));let r=_+e,n=[];for(t="";_<r;){let s=A[_++];if(!(s&128))n.push(s);else if((s&224)===192){let i=A[_++]&63;n.push((s&31)<<6|i)}else if((s&240)===224){let i=A[_++]&63,o=A[_++]&63;n.push((s&31)<<12|i<<6|o)}else if((s&248)===240){let i=A[_++]&63,o=A[_++]&63,c=A[_++]&63,d=(s&7)<<18|i<<12|o<<6|c;d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|d&1023),n.push(d)}else n.push(s);n.length>=4096&&(t+=J.apply(String,n),n.length=0)}return n.length>0&&(t+=J.apply(String,n)),t}var J=String.fromCharCode;function Io(e){let t=_,r=new Array(e);for(let n=0;n<e;n++){let s=A[_++];if((s&128)>0){_=t;return}r[n]=s}return J.apply(String,r)}function An(e){if(e<4)if(e<2){if(e===0)return"";{let t=A[_++];if((t&128)>1){_-=1;return}return J(t)}}else{let t=A[_++],r=A[_++];if((t&128)>0||(r&128)>0){_-=2;return}if(e<3)return J(t,r);let n=A[_++];if((n&128)>0){_-=3;return}return J(t,r,n)}else{let t=A[_++],r=A[_++],n=A[_++],s=A[_++];if((t&128)>0||(r&128)>0||(n&128)>0||(s&128)>0){_-=4;return}if(e<6){if(e===4)return J(t,r,n,s);{let i=A[_++];if((i&128)>0){_-=5;return}return J(t,r,n,s,i)}}else if(e<8){let i=A[_++],o=A[_++];if((i&128)>0||(o&128)>0){_-=6;return}if(e<7)return J(t,r,n,s,i,o);let c=A[_++];if((c&128)>0){_-=7;return}return J(t,r,n,s,i,o,c)}else{let i=A[_++],o=A[_++],c=A[_++],d=A[_++];if((i&128)>0||(o&128)>0||(c&128)>0||(d&128)>0){_-=8;return}if(e<10){if(e===8)return J(t,r,n,s,i,o,c,d);{let g=A[_++];if((g&128)>0){_-=9;return}return J(t,r,n,s,i,o,c,d,g)}}else if(e<12){let g=A[_++],b=A[_++];if((g&128)>0||(b&128)>0){_-=10;return}if(e<11)return J(t,r,n,s,i,o,c,d,g,b);let f=A[_++];if((f&128)>0){_-=11;return}return J(t,r,n,s,i,o,c,d,g,b,f)}else{let g=A[_++],b=A[_++],f=A[_++],h=A[_++];if((g&128)>0||(b&128)>0||(f&128)>0||(h&128)>0){_-=12;return}if(e<14){if(e===12)return J(t,r,n,s,i,o,c,d,g,b,f,h);{let p=A[_++];if((p&128)>0){_-=13;return}return J(t,r,n,s,i,o,c,d,g,b,f,h,p)}}else{let p=A[_++],w=A[_++];if((p&128)>0||(w&128)>0){_-=14;return}if(e<15)return J(t,r,n,s,i,o,c,d,g,b,f,h,p,w);let E=A[_++];if((E&128)>0){_-=15;return}return J(t,r,n,s,i,o,c,d,g,b,f,h,p,w,E)}}}}}function Ro(e){return P.copyBuffers?Uint8Array.prototype.slice.call(A,_,_+=e):A.subarray(_,_+=e)}var En=new Float32Array(1),wt=new Uint8Array(En.buffer,0,4);function Oo(){let e=A[_++],t=A[_++],r=(e&127)>>2;if(r===31)return t||e&3?NaN:e&128?-1/0:1/0;if(r===0){let n=((e&3)<<8|t)/16777216;return e&128?-n:n}return wt[3]=e&128|(r>>1)+56,wt[2]=(e&7)<<5|t>>3,wt[1]=t<<5,wt[0]=0,En[0]}var Ac=new Array(4096);var le=class{constructor(t,r){this.value=t,this.tag=r}};W[0]=e=>new Date(e);W[1]=e=>new Date(Math.round(e*1e3));W[2]=e=>{let t=BigInt(0);for(let r=0,n=e.byteLength;r<n;r++)t=BigInt(e[r])+(t<<BigInt(8));return t};W[3]=e=>BigInt(-1)-W[2](e);W[4]=e=>+(e[1]+"e"+e[0]);W[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));var gr=(e,t)=>{e=e-57344;let r=$[e];r&&r.isShared&&(($.restoreStructures||($.restoreStructures=[]))[e]=r),$[e]=t,t.read=dr(t)};W[Ao]=e=>{let t=e.length,r=e[1];gr(e[0],r);let n={};for(let s=2;s<t;s++){let i=r[s-2];n[ce(i)]=e[s]}return n};W[14]=e=>K?K[0].slice(K.position0,K.position0+=e):new le(e,14);W[15]=e=>K?K[1].slice(K.position1,K.position1+=e):new le(e,15);var Mo={Error,RegExp};W[27]=e=>(Mo[e[0]]||Error)(e[1],e[2]);var kn=e=>{if(A[_++]!=132){let r=new Error("Packed values structure must be followed by a 4 element array");throw A.length<_&&(r.incomplete=!0),r}let t=e();if(!t||!t.length){let r=new Error("Packed values structure must be followed by a 4 element array");throw r.incomplete=!0,r}return ee=ee?t.concat(ee.slice(t.length)):t,ee.prefixes=e(),ee.suffixes=e(),e()};kn.handlesRead=!0;W[51]=kn;W[yn]=e=>{if(!ee)if(P.getShared)pr();else return new le(e,yn);if(typeof e=="number")return ee[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");throw e===void 0&&(t.incomplete=!0),t};W[28]=e=>{ae||(ae=new Map,ae.id=0);let t=ae.id++,r=_,n=A[_],s;n>>5==4?s=[]:s={};let i={target:s};ae.set(t,i);let o=e();return i.used?(Object.getPrototypeOf(s)!==Object.getPrototypeOf(o)&&(_=r,s=o,ae.set(t,{target:s}),o=e()),Object.assign(s,o)):(i.target=o,o)};W[28].handlesRead=!0;W[29]=e=>{let t=ae.get(e);return t.used=!0,t.target};W[258]=e=>new Set(e);(W[259]=e=>(P.mapsAsObjects&&(P.mapsAsObjects=!1,nt=!0),e())).handlesRead=!0;function We(e,t){return typeof e=="string"?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function je(){if(!ee)if(P.getShared)pr();else throw new Error("No packed values available");return ee}var Uo=1399353956;lr.push((e,t)=>{if(e>=225&&e<=255)return We(je().prefixes[e-224],t);if(e>=28704&&e<=32767)return We(je().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return We(je().prefixes[e-1879048192],t);if(e>=216&&e<=223)return We(t,je().suffixes[e-216]);if(e>=27647&&e<=28671)return We(t,je().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return We(t,je().suffixes[e-1811939328]);if(e==Uo)return{packedValues:ee,structures:$.slice(0),version:t};if(e==55799)return t});var To=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,xn=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],jo=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<xn.length;e++)Do(xn[e],jo[e]);function Do(e,t){let r="get"+e.name.slice(0,-5),n;typeof e=="function"?n=e.BYTES_PER_ELEMENT:e=null;for(let s=0;s<2;s++){if(!s&&n==1)continue;let i=n==2?1:n==4?2:n==8?3:0;W[s?t:t-4]=n==1||s==To?o=>{if(!e)throw new Error("Could not find typed array for code "+t);return!P.copyBuffers&&(n===1||n===2&&!(o.byteOffset&1)||n===4&&!(o.byteOffset&3)||n===8&&!(o.byteOffset&7))?new e(o.buffer,o.byteOffset,o.byteLength>>i):new e(Uint8Array.prototype.slice.call(o,0).buffer)}:o=>{if(!e)throw new Error("Could not find typed array for code "+t);let c=new DataView(o.buffer,o.byteOffset,o.byteLength),d=o.length>>i,g=new e(d),b=c[r];for(let f=0;f<d;f++)g[f]=b.call(c,f<<i,s);return g}}}function Po(){let e=Ke(),t=_+B();for(let n=2;n<e;n++){let s=Ke();_+=s}let r=_;return _=t,K=[hr(Ke()),hr(Ke())],K.position0=0,K.position1=0,K.postBundlePosition=_,_=r,B()}function Ke(){let e=A[_++]&31;if(e>23)switch(e){case 24:e=A[_++];break;case 25:e=Q.getUint16(_),_+=2;break;case 26:e=Q.getUint32(_),_+=4;break}return e}function pr(){if(P.getShared){let e=Cn(()=>(A=null,P.getShared()))||{},t=e.structures||[];P.sharedVersion=e.version,ee=P.sharedValues=e.packedValues,$===!0?P.structures=$=t:$.splice.apply($,[0,t.length].concat(t))}}function Cn(e){let t=De,r=_,n=ur,s=vt,i=st,o=xt,c=fr,d=ae,g=K,b=new Uint8Array(A.slice(0,De)),f=$,h=P,p=ot,w=e();return De=t,_=r,ur=n,vt=s,st=i,xt=o,fr=c,ae=d,K=g,A=b,ot=p,$=f,P=h,Q=new DataView(A.buffer,A.byteOffset,A.byteLength),w}function St(){A=null,ae=null,$=null}var At=new Array(147);for(let e=0;e<256;e++)At[e]=+("1e"+Math.floor(45.15-e*.30103));var _r=new Pe({useRecords:!1}),Et=_r.decode,Fo=_r.decodeMultiple,kt={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4};var Ct;try{Ct=new TextEncoder}catch{}var xr,Tn,Ot=typeof globalThis=="object"&&globalThis.Buffer,it=typeof Ot<"u",br=it?Ot.allocUnsafeSlow:Uint8Array,In=it?Ot:Uint8Array,Rn=256,On=it?4294967296:2144337920;var yr,u,V,a=0,Ie,q=null,Bo=61440,Lo=/[\u0080-\uFFFF]/,ne=Symbol("record-id"),Fe=class extends Pe{constructor(t){super(t),this.offset=0;let r,n,s,i,o,c;t=t||{};let d=In.prototype.utf8Write?function(l,k,y){return u.utf8Write(l,k,y)}:Ct&&Ct.encodeInto?function(l,k){return Ct.encodeInto(l,u.subarray(k)).written}:!1,g=this,b=t.structures||t.saveStructures,f=t.maxSharedStructures;if(f==null&&(f=b?128:0),f>8190)throw new Error("Maximum maxSharedStructure is 8190");let h=t.sequential;h&&(f=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let p,w,E=t.sharedValues,S;if(E){S=Object.create(null);for(let l=0,k=E.length;l<k;l++)S[E[l]]=l}let C=[],R=0,F=0;this.mapEncode=function(l,k){if(this._keyMap&&!this._mapped)switch(l.constructor.name){case"Array":l=l.map(y=>this.encodeKeys(y));break}return this.encode(l,k)},this.encode=function(l,k){if(u||(u=new br(8192),V=new DataView(u.buffer,0,8192),a=0),Ie=u.length-10,Ie-a<2048?(u=new br(u.length),V=new DataView(u.buffer,0,u.length),Ie=u.length-10,a=0):k===Sr&&(a=a+7&2147483640),n=a,g.useSelfDescribedHeader&&(V.setUint32(a,3654940416),a+=3),c=g.structuredClone?new Map:null,g.bundleStrings&&typeof l!="string"?(q=[],q.size=1/0):q=null,s=g.structures,s){if(s.uninitialized){let m=g.getShared()||{};g.structures=s=m.structures||[],g.sharedVersion=m.version;let x=g.sharedValues=m.packedValues;if(x){S={};for(let I=0,O=x.length;I<O;I++)S[x[I]]=I}}let y=s.length;if(y>f&&!h&&(y=f),!s.transitions){s.transitions=Object.create(null);for(let m=0;m<y;m++){let x=s[m];if(!x)continue;let I,O=s.transitions;for(let M=0,D=x.length;M<D;M++){O[ne]===void 0&&(O[ne]=m);let L=x[M];I=O[L],I||(I=O[L]=Object.create(null)),O=I}O[ne]=m|1048576}}h||(s.nextId=y)}if(i&&(i=!1),o=s||[],w=S,t.pack){let y=new Map;if(y.values=[],y.encoder=g,y.maxValues=t.maxPrivatePackedValues||(S?16:1/0),y.objectMap=S||!1,y.samplingPackedValues=p,It(l,y),y.values.length>0){u[a++]=216,u[a++]=51,ye(4);let m=y.values;v(m),ye(0),ye(0),w=Object.create(S||null);for(let x=0,I=m.length;x<I;x++)w[m[x]]=x}}yr=k&wr;try{if(yr)return;if(v(l),q&&Un(n,v),g.offset=a,c&&c.idsToInsert){a+=c.idsToInsert.length*2,a>Ie&&H(a),g.offset=a;let y=No(u.subarray(n,a),c.idsToInsert);return c=null,y}return k&Sr?(u.start=n,u.end=a,u):u.subarray(n,a)}finally{if(s){if(F<10&&F++,s.length>f&&(s.length=f),R>1e4)s.transitions=null,F=0,R=0,C.length>0&&(C=[]);else if(C.length>0&&!h){for(let y=0,m=C.length;y<m;y++)C[y][ne]=void 0;C=[]}}if(i&&g.saveShared){g.structures.length>f&&(g.structures=g.structures.slice(0,f));let y=u.subarray(n,a);return g.updateSharedData()===!1?g.encode(l):y}k&Yo&&(a=n)}},this.findCommonStringsToPack=()=>(p=new Map,S||(S=Object.create(null)),l=>{let k=l&&l.threshold||4,y=this.pack?l.maxPrivatePackedValues||16:0;E||(E=this.sharedValues=[]);for(let[m,x]of p)x.count>k&&(S[m]=y++,E.push(m),i=!0);for(;this.saveShared&&this.updateSharedData()===!1;);p=null});let v=l=>{a>Ie&&(u=H(a));var k=typeof l,y;if(k==="string"){if(w){let O=w[l];if(O>=0){O<16?u[a++]=O+224:(u[a++]=198,O&1?v(15-O>>1):v(O-16>>1));return}else if(p&&!t.pack){let M=p.get(l);M?M.count++:p.set(l,{count:1})}}let m=l.length;if(q&&m>=4&&m<1024){if((q.size+=m)>Bo){let M,D=(q[0]?q[0].length*3+q[1].length:0)+10;a+D>Ie&&(u=H(a+D)),u[a++]=217,u[a++]=223,u[a++]=249,u[a++]=q.position?132:130,u[a++]=26,M=a-n,a+=4,q.position&&Un(n,v),q=["",""],q.size=0,q.position=M}let O=Lo.test(l);q[O?0:1]+=l,u[a++]=O?206:207,v(m);return}let x;m<32?x=1:m<256?x=2:m<65536?x=3:x=5;let I=m*3;if(a+I>Ie&&(u=H(a+I)),m<64||!d){let O,M,D,L=a+x;for(O=0;O<m;O++)M=l.charCodeAt(O),M<128?u[L++]=M:M<2048?(u[L++]=M>>6|192,u[L++]=M&63|128):(M&64512)===55296&&((D=l.charCodeAt(O+1))&64512)===56320?(M=65536+((M&1023)<<10)+(D&1023),O++,u[L++]=M>>18|240,u[L++]=M>>12&63|128,u[L++]=M>>6&63|128,u[L++]=M&63|128):(u[L++]=M>>12|224,u[L++]=M>>6&63|128,u[L++]=M&63|128);y=L-a-x}else y=d(l,a+x,I);y<24?u[a++]=96|y:y<256?(x<2&&u.copyWithin(a+2,a+1,a+1+y),u[a++]=120,u[a++]=y):y<65536?(x<3&&u.copyWithin(a+3,a+2,a+2+y),u[a++]=121,u[a++]=y>>8,u[a++]=y&255):(x<5&&u.copyWithin(a+5,a+3,a+3+y),u[a++]=122,V.setUint32(a,y),a+=4),a+=y}else if(k==="number")if(!this.alwaysUseFloat&&l>>>0===l)l<24?u[a++]=l:l<256?(u[a++]=24,u[a++]=l):l<65536?(u[a++]=25,u[a++]=l>>8,u[a++]=l&255):(u[a++]=26,V.setUint32(a,l),a+=4);else if(!this.alwaysUseFloat&&l>>0===l)l>=-24?u[a++]=31-l:l>=-256?(u[a++]=56,u[a++]=~l):l>=-65536?(u[a++]=57,V.setUint16(a,~l),a+=2):(u[a++]=58,V.setUint32(a,~l),a+=4);else{let m;if((m=this.useFloat32)>0&&l<4294967296&&l>=-2147483648){u[a++]=250,V.setFloat32(a,l);let x;if(m<4||(x=l*At[(u[a]&127)<<1|u[a+1]>>7])>>0===x){a+=4;return}else a--}u[a++]=251,V.setFloat64(a,l),a+=8}else if(k==="object")if(!l)u[a++]=246;else{if(c){let x=c.get(l);if(x){if(u[a++]=216,u[a++]=29,u[a++]=25,!x.references){let I=c.idsToInsert||(c.idsToInsert=[]);x.references=[],I.push(x)}x.references.push(a-n),a+=2;return}else c.set(l,{offset:a-n})}let m=l.constructor;if(m===Object)T(l);else if(m===Array){y=l.length,y<24?u[a++]=128|y:ye(y);for(let x=0;x<y;x++)v(l[x])}else if(m===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(u[a++]=217,u[a++]=1,u[a++]=3),y=l.size,y<24?u[a++]=160|y:y<256?(u[a++]=184,u[a++]=y):y<65536?(u[a++]=185,u[a++]=y>>8,u[a++]=y&255):(u[a++]=186,V.setUint32(a,y),a+=4),g.keyMap)for(let[x,I]of l)v(g.encodeKey(x)),v(I);else for(let[x,I]of l)v(x),v(I);else{for(let x=0,I=xr.length;x<I;x++){let O=Tn[x];if(l instanceof O){let M=xr[x],D=M.tag;D==null&&(D=M.getTag&&M.getTag.call(this,l)),D<24?u[a++]=192|D:D<256?(u[a++]=216,u[a++]=D):D<65536?(u[a++]=217,u[a++]=D>>8,u[a++]=D&255):D>-1&&(u[a++]=218,V.setUint32(a,D),a+=4),M.encode.call(this,l,v,H);return}}if(l[Symbol.iterator]){if(yr){let x=new Error("Iterable should be serialized as iterator");throw x.iteratorNotHandled=!0,x}u[a++]=159;for(let x of l)v(x);u[a++]=255;return}if(l[Symbol.asyncIterator]||mr(l)){let x=new Error("Iterable/blob should be serialized as iterator");throw x.iteratorNotHandled=!0,x}if(this.useToJSON&&l.toJSON){let x=l.toJSON();if(x!==l)return v(x)}T(l)}}else if(k==="boolean")u[a++]=l?245:244;else if(k==="bigint"){if(l<BigInt(1)<<BigInt(64)&&l>=0)u[a++]=27,V.setBigUint64(a,l);else if(l>-(BigInt(1)<<BigInt(64))&&l<0)u[a++]=59,V.setBigUint64(a,-l-BigInt(1));else if(this.largeBigIntToFloat)u[a++]=251,V.setFloat64(a,Number(l));else{l>=BigInt(0)?u[a++]=194:(u[a++]=195,l=BigInt(-1)-l);let m=[];for(;l;)m.push(Number(l&BigInt(255))),l>>=BigInt(8);vr(new Uint8Array(m.reverse()),H);return}a+=8}else if(k==="undefined")u[a++]=247;else throw new Error("Unknown type: "+k)},T=this.useRecords===!1?this.variableMapSize?l=>{let k=Object.keys(l),y=Object.values(l),m=k.length;m<24?u[a++]=160|m:m<256?(u[a++]=184,u[a++]=m):m<65536?(u[a++]=185,u[a++]=m>>8,u[a++]=m&255):(u[a++]=186,V.setUint32(a,m),a+=4);let x;if(g.keyMap)for(let I=0;I<m;I++)v(g.encodeKey(k[I])),v(y[I]);else for(let I=0;I<m;I++)v(k[I]),v(y[I])}:l=>{u[a++]=185;let k=a-n;a+=2;let y=0;if(g.keyMap)for(let m in l)(typeof l.hasOwnProperty!="function"||l.hasOwnProperty(m))&&(v(g.encodeKey(m)),v(l[m]),y++);else for(let m in l)(typeof l.hasOwnProperty!="function"||l.hasOwnProperty(m))&&(v(m),v(l[m]),y++);u[k+++n]=y>>8,u[k+n]=y&255}:(l,k)=>{let y,m=o.transitions||(o.transitions=Object.create(null)),x=0,I=0,O,M;if(this.keyMap){M=Object.keys(l).map(L=>this.encodeKey(L)),I=M.length;for(let L=0;L<I;L++){let Rr=M[L];y=m[Rr],y||(y=m[Rr]=Object.create(null),x++),m=y}}else for(let L in l)(typeof l.hasOwnProperty!="function"||l.hasOwnProperty(L))&&(y=m[L],y||(m[ne]&1048576&&(O=m[ne]&65535),y=m[L]=Object.create(null),x++),m=y,I++);let D=m[ne];if(D!==void 0)D&=65535,u[a++]=217,u[a++]=D>>8|224,u[a++]=D&255;else if(M||(M=m.__keys__||(m.__keys__=Object.keys(l))),O===void 0?(D=o.nextId++,D||(D=0,o.nextId=1),D>=Rn&&(o.nextId=(D=f)+1)):D=O,o[D]=M,D<f){u[a++]=217,u[a++]=D>>8|224,u[a++]=D&255,m=o.transitions;for(let L=0;L<I;L++)(m[ne]===void 0||m[ne]&1048576)&&(m[ne]=D),m=m[M[L]];m[ne]=D|1048576,i=!0}else{if(m[ne]=D,V.setUint32(a,3655335680),a+=3,x&&(R+=F*x),C.length>=Rn-f&&(C.shift()[ne]=void 0),C.push(m),ye(I+2),v(57344+D),v(M),k)return;for(let L in l)(typeof l.hasOwnProperty!="function"||l.hasOwnProperty(L))&&v(l[L]);return}if(I<24?u[a++]=128|I:ye(I),!k)for(let L in l)(typeof l.hasOwnProperty!="function"||l.hasOwnProperty(L))&&v(l[L])},H=l=>{let k;if(l>16777216){if(l-n>On)throw new Error("Encoded buffer would be larger than maximum buffer size");k=Math.min(On,Math.round(Math.max((l-n)*(l>67108864?1.25:2),4194304)/4096)*4096)}else k=(Math.max(l-n<<2,u.length-1)>>12)+1<<12;let y=new br(k);return V=new DataView(y.buffer,0,k),u.copy?u.copy(y,0,n,l):y.set(u.slice(n,l)),a-=n,n=0,Ie=y.length-10,u=y},j=100,z=1e3;this.encodeAsIterable=function(l,k){return Oe(l,k,N)},this.encodeAsAsyncIterable=function(l,k){return Oe(l,k,Ir)};function*N(l,k,y){let m=l.constructor;if(m===Object){let x=g.useRecords!==!1;x?T(l,!0):Mn(Object.keys(l).length,160);for(let I in l){let O=l[I];x||v(I),O&&typeof O=="object"?k[I]?yield*N(O,k[I]):yield*me(O,k,I):v(O)}}else if(m===Array){let x=l.length;ye(x);for(let I=0;I<x;I++){let O=l[I];O&&(typeof O=="object"||a-n>j)?k.element?yield*N(O,k.element):yield*me(O,k,"element"):v(O)}}else if(l[Symbol.iterator]&&!l.buffer){u[a++]=159;for(let x of l)x&&(typeof x=="object"||a-n>j)?k.element?yield*N(x,k.element):yield*me(x,k,"element"):v(x);u[a++]=255}else mr(l)?(Mn(l.size,64),yield u.subarray(n,a),yield l,fe()):l[Symbol.asyncIterator]?(u[a++]=159,yield u.subarray(n,a),yield l,fe(),u[a++]=255):v(l);y&&a>n?yield u.subarray(n,a):a-n>j&&(yield u.subarray(n,a),fe())}function*me(l,k,y){let m=a-n;try{v(l),a-n>j&&(yield u.subarray(n,a),fe())}catch(x){if(x.iteratorNotHandled)k[y]={},a=n+m,yield*N.call(this,l,k[y]);else throw x}}function fe(){j=z,g.encode(null,wr)}function Oe(l,k,y){return k&&k.chunkThreshold?j=z=k.chunkThreshold:j=100,l&&typeof l=="object"?(g.encode(null,wr),y(l,g.iterateProperties||(g.iterateProperties={}),!0)):[g.encode(l)]}async function*Ir(l,k){for(let y of N(l,k,!0)){let m=y.constructor;if(m===In||m===Uint8Array)yield y;else if(mr(y)){let x=y.stream().getReader(),I;for(;!(I=await x.read()).done;)yield I.value}else if(y[Symbol.asyncIterator])for await(let x of y)fe(),x?yield*Ir(x,k.async||(k.async={})):yield g.encode(x);else yield y}}}useBuffer(t){u=t,V=new DataView(u.buffer,u.byteOffset,u.byteLength),a=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let r=this.structures.slice(0),n=new Rt(r,this.sharedValues,this.sharedVersion),s=this.saveShared(n,i=>(i&&i.version||0)==t);return s===!1?(n=this.getShared()||{},this.structures=n.structures||[],this.sharedValues=n.packedValues,this.sharedVersion=n.version,this.structures.nextId=this.structures.length):r.forEach((i,o)=>this.structures[o]=i),s}};function Mn(e,t){e<24?u[a++]=t|e:e<256?(u[a++]=t|24,u[a++]=e):e<65536?(u[a++]=t|25,u[a++]=e>>8,u[a++]=e&255):(u[a++]=t|26,V.setUint32(a,e),a+=4)}var Rt=class{constructor(t,r,n){this.structures=t,this.packedValues=r,this.version=n}};function ye(e){e<24?u[a++]=128|e:e<256?(u[a++]=152,u[a++]=e):e<65536?(u[a++]=153,u[a++]=e>>8,u[a++]=e&255):(u[a++]=154,V.setUint32(a,e),a+=4)}var Ho=typeof Blob>"u"?function(){}:Blob;function mr(e){if(e instanceof Ho)return!0;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function It(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let n=t.get(e);if(n)++n.count==2&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let s=t.samplingPackedValues.get(e);s?s.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let n=0,s=e.length;n<s;n++)It(e[n],t);else{let n=!t.encoder.useRecords;for(var r in e)e.hasOwnProperty(r)&&(n&&It(r,t),It(e[r],t))}break;case"function":console.log(e)}}var zo=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;Tn=[Date,Set,Error,RegExp,le,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,Rt];xr=[{tag:1,encode(e,t){let r=e.getTime()/1e3;(this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296?(u[a++]=26,V.setUint32(a,r),a+=4):(u[a++]=251,V.setFloat64(a,r),a+=8)}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,r){vr(e,r)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||it&&this.tagUint8Array!==!1))return 64},encode(e,t,r){vr(e,r)}},be(68,1),be(69,2),be(70,4),be(71,8),be(72,1),be(77,2),be(78,4),be(79,8),be(85,4),be(86,8),{encode(e,t){let r=e.packedValues||[],n=e.structures||[];if(r.values.length>0){u[a++]=216,u[a++]=51,ye(4);let s=r.values;t(s),ye(0),ye(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let i=0,o=s.length;i<o;i++)packedObjectMap[s[i]]=i}if(n){V.setUint32(a,3655335424),a+=3;let s=n.slice(0);s.unshift(57344),s.push(new le(e.version,1399353956)),t(s)}else t(new le(e.version,1399353956))}}];function be(e,t){return!zo&&t>1&&(e-=4),{tag:e,encode:function(n,s){let i=n.byteLength,o=n.byteOffset||0,c=n.buffer||n;s(it?Ot.from(c,o,i):new Uint8Array(c,o,i))}}}function vr(e,t){let r=e.byteLength;r<24?u[a++]=64+r:r<256?(u[a++]=88,u[a++]=r):r<65536?(u[a++]=89,u[a++]=r>>8,u[a++]=r&255):(u[a++]=90,V.setUint32(a,r),a+=4),a+r>=u.length&&t(a+r),u.set(e.buffer?e:new Uint8Array(e),a),a+=r}function No(e,t){let r,n=t.length*2,s=e.length-n;t.sort((i,o)=>i.offset>o.offset?1:-1);for(let i=0;i<t.length;i++){let o=t[i];o.id=i;for(let c of o.references)e[c++]=i>>8,e[c]=i&255}for(;r=t.pop();){let i=r.offset;e.copyWithin(i+n,i,s),n-=2;let o=i+n;e[o++]=216,e[o++]=28,s=i}return e}function Un(e,t){V.setUint32(q.position+e,a-q.position-e+1);let r=q;q=null,t(r[0]),t(r[1])}var Ar=new Fe({useRecords:!1}),Vo=Ar.encode,$o=Ar.encodeAsIterable,Wo=Ar.encodeAsAsyncIterable,{NEVER:Ko,ALWAYS:qo,DECIMAL_ROUND:Jo,DECIMAL_FIT:Go}=kt,Sr=512,Yo=1024,wr=2048;function jn(e){return new Fe({tagUint8Array:!1,useRecords:!1}).encode(e)}function Xo(e){return Et(e)}var Zo={IDLE:"idle",LOADING:"loading",REQUESTING:"requesting",READY:"ready",DELETED:"deleted",UNAVAILABLE:"unavailable"},{IDLE:nf,LOADING:sf,REQUESTING:ei,READY:ti,DELETED:of,UNAVAILABLE:ri}=Zo;var bi=se(pe(),1);var si=se(pe(),1);var ii=se(pe(),1);var fi=se(pe(),1);var ci=se(Ln(),1);var Hn=se(pe(),1);var di=se(pe(),1);var Nf=(0,Hn.default)("automerge-repo:collectionsync");var Le=class extends Se.default{peerId;peerMetadata};var qe=null;typeof WebSocket<"u"?qe=WebSocket:typeof MozWebSocket<"u"?qe=MozWebSocket:typeof __global$<"u"?qe=__global$.WebSocket||__global$.MozWebSocket:typeof window<"u"?qe=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(qe=self.WebSocket||self.MozWebSocket);var Je=qe;var $n=se(pe(),1);var zn=e=>e.type==="join",Nn=e=>e.type==="peer",Vn=e=>e.type==="error";var Re="1";function te(e,t="Assertion failed"){if(e===!1||e===null||e===void 0){let r=new Error(yi(t));throw r.stack=mi(r.stack,"assert.ts"),r}}var yi=e=>e.split(`
`).map(t=>t.trim()).join(`
`),mi=(e="",t)=>e.split(`
`).filter(r=>!r.includes(t)).join(`
`);var Ut=e=>{let{buffer:t,byteOffset:r,byteLength:n}=e;return t.slice(r,r+n)};var Er=class extends Le{socket},kr=class extends Er{url;retryInterval;#r=!1;#n;#o=new Promise(t=>{this.#n=t});isReady(){return this.#r}whenReady(){return this.#o}#s(){this.#r||(this.#r=!0,this.#n?.())}#t;#e=(0,$n.default)("automerge-repo:websocket:browser");remotePeerId;constructor(t,r=5e3){super(),this.url=t,this.retryInterval=r,this.#e=this.#e.extend(t)}connect(t,r){!this.socket||!this.peerId?(this.#e("connecting"),this.peerId=t,this.peerMetadata=r??{}):(this.#e("reconnecting"),te(t===this.peerId),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError)),this.#t||(this.#t=setInterval(()=>{this.connect(t,r)},this.retryInterval)),this.socket=new Je(this.url),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),setTimeout(()=>this.#s(),1e3),this.join()}onOpen=()=>{this.#e("open"),clearInterval(this.#t),this.#t=void 0,this.join()};onClose=()=>{this.#e("close"),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.retryInterval>0&&!this.#t&&setTimeout(()=>(te(this.peerId),this.connect(this.peerId,this.peerMetadata)),this.retryInterval)};onMessage=t=>{this.receiveMessage(t.data)};onError=t=>{if("error"in t&&t.error.code!=="ECONNREFUSED")throw t.error;this.#e("Connection failed, retrying...")};join(){te(this.peerId),te(this.socket),this.socket.readyState===Je.OPEN&&this.send(wi(this.peerId,this.peerMetadata))}disconnect(){te(this.peerId),te(this.socket);let t=this.socket;t&&(t.removeEventListener("open",this.onOpen),t.removeEventListener("close",this.onClose),t.removeEventListener("message",this.onMessage),t.removeEventListener("error",this.onError),t.close()),clearInterval(this.#t),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.socket=void 0}send(t){if("data"in t&&t.data?.byteLength===0)throw new Error("Tried to send a zero-length message");if(te(this.peerId),!this.socket){this.#e("Tried to send on a disconnected socket.");return}if(this.socket.readyState!==Je.OPEN)throw new Error(`Websocket not ready (${this.socket.readyState})`);let r=Be.encode(t);this.socket.send(Ut(r))}peerCandidate(t,r){te(this.socket),this.#s(),this.remotePeerId=t,this.emit("peer-candidate",{peerId:t,peerMetadata:r})}receiveMessage(t){let r=Be.decode(new Uint8Array(t));if(te(this.socket),t.byteLength===0)throw new Error("received a zero-length message");if(Nn(r)){let{peerMetadata:n}=r;this.#e(`peer: ${r.senderId}`),this.peerCandidate(r.senderId,n)}else Vn(r)?this.#e(`error: ${r.message}`):this.emit("message",r)}};function wi(e,t){return{type:"join",senderId:e,peerMetadata:t,supportedProtocolVersions:[Re]}}var Kn=se(pe(),1);var Wn=(0,Kn.default)("WebsocketServer"),{encode:xi,decode:vi}=Be,Cr=class extends Le{server;keepAliveInterval;sockets={};#r=!1;#n;#o=new Promise(t=>{this.#n=t});isReady(){return this.#r}whenReady(){return this.#o}#s(){this.#r||(this.#r=!0,this.#n?.())}constructor(t,r=5e3){super(),this.server=t,this.keepAliveInterval=r}connect(t,r){this.peerId=t,this.peerMetadata=r,this.server.on("close",()=>{clearInterval(n),this.disconnect()}),this.server.on("connection",s=>{s.on("close",()=>{this.#e(s)}),s.on("message",i=>this.receiveMessage(i,s)),s.isAlive=!0,s.on("pong",()=>s.isAlive=!0),this.#s()});let n=setInterval(()=>{this.server.clients.forEach(i=>{i.isAlive?(i.isAlive=!1,i.ping()):this.#t(i)})},this.keepAliveInterval)}disconnect(){this.server.clients.forEach(r=>{this.#t(r),this.#e(r)})}send(t){if(te("targetId"in t&&t.targetId!==void 0),"data"in t&&t.data?.byteLength===0)throw new Error("Tried to send a zero-length message");let r=this.peerId;te(r,"No peerId set for the websocket server network adapter.");let n=this.sockets[t.targetId];if(!n){Wn(`Tried to send to disconnected peer: ${t.targetId}`);return}let s=xi(t),i=Ut(s);n.send(i)}receiveMessage(t,r){let n=vi(t),{type:s,senderId:i}=n,o=this.peerId;te(o);let c="documentId"in n?"@"+n.documentId:"",{byteLength:d}=t;if(Wn(`[${i}->${o}${c}] ${s} | ${d} bytes`),zn(n)){let{peerMetadata:g,supportedProtocolVersions:b}=n,f=this.sockets[i];f&&(f.readyState===Je.OPEN&&f.close(),this.emit("peer-disconnected",{peerId:i})),this.emit("peer-candidate",{peerId:i,peerMetadata:g}),this.sockets[i]=r,Si(b)===null?(this.send({type:"error",senderId:this.peerId,message:"unsupported protocol version",targetId:i}),this.sockets[i].close(),delete this.sockets[i]):this.send({type:"peer",senderId:this.peerId,peerMetadata:this.peerMetadata,selectedProtocolVersion:Re,targetId:i})}else this.emit("message",n)}#t(t){this.#e(t),t.terminate()}#e(t){let r=this.#i(t);r&&(this.emit("peer-disconnected",{peerId:r}),delete this.sockets[r])}#i=t=>{let r=s=>this.sockets[s]===t;return Object.keys(this.sockets).find(r)??null}},Si=e=>e===void 0?Re:e.includes(Re)?Re:null;export{kr as BrowserWebSocketClientAdapter,Cr as NodeWSServerAdapter,Re as ProtocolV1};
/*! Bundled license information:

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=automerge-repo-network-websocket.bundle.mjs.map